!function(){"use strict";const t=document.querySelector(".profile__edit-button"),e=document.querySelector(".profile__add-button"),s=document.querySelector("#photos-display-modal"),i=document.querySelector(".photos__list"),r=(s.querySelector(".modal__photos-link"),s.querySelector(".modal__photos-title"),document.querySelector(".profile__avatar-btn"));class o{constructor(t,e,s,i,r){this._cardName=t.name,this._cardImage=t.link,this._cardAlt=t.name,this._cardSelector=e,this._handleImageClick=s,this._handleDeleteCard=i,this._handleLikeCard=r,this._id=t._id,this._isLiked=!1}_getView(){this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".photos__card").cloneNode(!0),this._likeButton=this._cardElement.querySelector(".photos__like-button"),this._deleteButton=this._cardElement.querySelector(".photos__delete-button"),this._cardImageButton=this._cardElement.querySelector(".photos__image"),this._cardElementName=this._cardElement.querySelector(".photos__caption"),this._cardElementImage=this._cardElement.querySelector(".photos__image")}_setCardData(){this._cardElementName.textContent=this._cardName,this._cardElementImage.src=this._cardImage,this._cardElementImage.alt=this._cardName}getCardElement(){return this._cardElement}generateCard(){return this._getView(),this._setEventListeners(),this._setCardData(),this._cardElement}getCardId(){return this._id}getCardIsLiked(){return this._isLiked}deleteCard(){this._cardElement.remove(),this._cardElement=null}likeCard(){this._likeButton.classList.add("photos__like-button_active"),this._isLiked=!0}dislikeCard(){this._likeButton.classList.remove("photos__like-button_active"),this._isLiked=!1}_setEventListeners(){this._deleteButton.addEventListener("click",(()=>{this._handleDeleteCard(this)})),this._cardImageButton.addEventListener("click",(()=>{this._handleImageClick({name:this._cardName,link:this._cardImage})})),this._likeButton.addEventListener("click",(()=>{this._handleLikeCard(this)}))}}class n{constructor(t,e){this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._fieldsetSelector=t.fieldsetSelector,this._formElement=e}_showInputError(t){const e=this._formElement.querySelector(`.${t.id}-error`);t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)}_hideInputError(t){const e=this._formElement.querySelector(`.${t.id}-error`);t.classList.remove(this._inputErrorClass),e.classList.remove(this._errorClass),e.textContent=""}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_hasInvalidInput(){return this._inputList.some((t=>!t.validity.valid))}_checkInputValidity(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}resetValidation(){this._toggleButtonState(),this._inputList.forEach((t=>{this._hideInputError(t)}))}_setEventListeners(){this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this._toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(function(t){t.preventDefault()})),this._setEventListeners()}}class a{constructor(t){this._popupElement=document.querySelector(t),this._closeButton=this._popupElement.querySelector(".modal__close-button")}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("mousedown",this._closeOnOverlayClick),document.addEventListener("keydown",this._closeOnEscKey)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("mousedown",this._closeOnOverlayClick),document.removeEventListener("keydown",this._closeOnEscKey)}_closeOnOverlayClick=t=>{t.target.classList.contains("modal_opened")&&this.close()};_closeOnEscKey=t=>{"Escape"===t.key&&this.close()};setEventListeners(){this._closeButton.addEventListener("click",(()=>{this.close()}))}}class l extends a{constructor(t,e){super(t),this._handleFormSubmit=e,this._submitButton=this._popupElement.querySelector(".modal__submit-button"),this._popupForm=this._popupElement.querySelector(".modal__container"),this._popupArray=this._popupElement.querySelectorAll(".modal__input"),this._inputList=Array.from(this._popupArray),this._originalSubmitText=this._submitButton.textContent}_getInputValue(){const t={};return this._inputList.forEach((e=>{t[e.name]=e.value})),t}setLoading(t){this._submitButton.textContent=t?"Saving...":this._originalSubmitText}setSubmit(t){this._handleFormSubmit=t}setInputValues(t){this._inputList.forEach((e=>{e.value=t[e.name]}))}setEventListeners(){this._popupForm.addEventListener("submit",(()=>{this._handleFormSubmit(this._getInputValue()),this._popupForm.reset()})),super.setEventListeners()}}r.addEventListener("click",(()=>{f.open()}));const c=new class{constructor(t){this._options=t,this._baseUrl=t.baseUrl,this._authToken=t.headers.authorization}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:{authorization:this._authToken}}).then((t=>t.ok?t.json():Promise.reject(`Error: ${t.status}`)))}getUserInformation(){return Promise.all([this.getUser(),this.getInitialCards()])}getUser(){return fetch(`${this._baseUrl}/users/me`,{headers:{authorization:this._authToken}}).then((t=>t.ok?t.json():Promise.reject(`Error: ${t.status}`)))}updateUserInformation(t){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:{authorization:this._authToken,"Content-Type":"application/json"},body:JSON.stringify({name:t.name,about:t.about})})}addCard(t){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:{authorization:this._authToken,"Content-Type":"application/json"},body:JSON.stringify({name:t.name,link:t.link})})}deleteCard(t){return fetch(`${this._baseUrl}/cards/${t}`,{method:"DELETE",headers:{authorization:this._authToken,"Content-Type":"application/json"},message:"This post has been deleted"})}likeCard(t){return fetch(`${this._baseUrl}/cards/${t}/likes`,{method:"PUT",headers:{authorization:this._authToken,"Content-Type":"application/json"}})}dislikeCard(t){return fetch(`${this._baseUrl}/cards/${t}/likes`,{method:"DELETE",headers:{authorization:this._authToken,"Content-Type":"application/json"}}).then((t=>t.ok?t.json():Promise.reject(t.statusText)))}udpateAvatar(t){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:{authorization:this._authToken,"Content-Type":"application/json"},body:JSON.stringify({avatar:t})}).then((t=>t.ok?t.json():Promise.reject(t.statusText)))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"b88b770f-9665-4862-bc7a-1a5aa8c4147a","Content-Type":"application/json"}}),d=new class{constructor(t,e){let{items:s,renderer:i}=t;this._items=s,this._renderer=i,this._container=document.querySelector(e)}addItem(t){this._renderer(t)}renderItems(){this._items.forEach((t=>{this._renderer(t,"append")}))}}({items:[{name:"Goat in a field",link:"https://images.unsplash.com/photo-1506076177893-89d54794ef41?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Snowy landscape",link:"https://images.unsplash.com/photo-1709403336601-c694b02d04ec?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Coastline ",link:"https://images.unsplash.com/photo-1707343843982-f8275f3994c5?q=80&w=1932&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Galaxy of stars",link:"https://images.unsplash.com/photo-1709403338527-8229912b3a67?q=80&w=1932&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Mount Everest",link:"https://images.unsplash.com/photo-1575819719798-83d97dd6949c?q=80&w=2069&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"School of fish",link:"https://images.unsplash.com/photo-1707327956851-30a531b70cda?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"}],renderer:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"prepend";const s=new o(t,"#photos-template",v,g,k).generateCard();i[e](s)}},"#card-add-form");c.getInitialCards().then((t=>t)).then((t=>{t.forEach((t=>{y(t)}))})).catch((t=>{console.error(t)}));const h=new l("#card-add-modal",(function(t){h.setLoading(!0),c.addCard(t).then((t=>t.json())).then((t=>{y(t),h.setLoading(!1)})).catch((t=>{console.error(t)})).finally(h.close())}));h.setEventListeners();const u=new l("#profile-edit-modal",(function(t){u.setLoading(!0),c.updateUserInformation(t).then((t=>t.json())).then((t=>{m.setUserInfo(t),u.setLoading(!1)})).catch((t=>{console.error(t)})).finally(u.close())}));u.setEventListeners();const _=new class extends a{constructor(t){super(t),this._imageTitle=this._popupElement.querySelector(".modal__photos-title"),this._imageLink=this._popupElement.querySelector(".modal__photos-link")}open(t){let{name:e,link:s}=t;this._imageTitle.textContent=e,this._imageLink.src=s,this._imageLink.alt=e,super.open()}}("#photos-display-modal");_.setEventListeners();const m=new class{constructor(t,e,s){this._profileName=document.querySelector(t),this._profileDescription=document.querySelector(e),this._profileAvatar=document.querySelector(s)}getUserInfo(){return{name:this._profileName.textContent,about:this._profileDescription.textContent,avatar:this._profileAvatar.src}}setUserInfo(t){let{name:e,about:s,avatar:i}=t;this._profileName.textContent=e,this._profileDescription.textContent=s,this._profileAvatar.src=i}setUserAvatar(t){this._profileAvatar.src=t}}(".profile__name",".profile__description",".profile__avatar-picture"),p=new l("#delete-card-modal");p.setEventListeners();const f=new l("#avatar-update-modal",(function(t){let{name:e}=t;c.udpateAvatar(e).then((()=>{m.setUserAvatar(e)})).catch((t=>{console.error("Error in updating avatar: ",t)})).finally(f.close())}));f.setEventListeners();const E={};var b;function v(t){let{name:e,link:s}=t;_.open({name:e,link:s})}function y(t){d.addItem(t)}function g(t){const e=t.getCardId();p.open(),p.setSubmit((()=>{p.setLoading(!0),c.deleteCard(e).then((()=>{t.deleteCard(),p.setLoading(!1)})).catch((t=>{console.error("Error in deleting card:",t)})).finally(p.close())}))}function k(t){const e=t.getCardId();0==t.getCardIsLiked()?c.likeCard(e).then((()=>{t.likeCard()})).catch((t=>{console.error("Error in liking card:",t)})):c.dislikeCard(e).then((()=>{t.dislikeCard()})).catch((t=>{console.error("Error in disliking card: ",t)}))}b={formSelector:".modal__container",inputSelector:".modal__input",submitButtonSelector:".modal__submit-button",inactiveButtonClass:"modal__submit-button_inactive",inputErrorClass:"modal__input_type_error",errorClass:"modal__input-error_active",fieldsetSelector:".modal__fieldset"},Array.from(document.querySelectorAll(b.formSelector)).forEach((t=>{const e=new n(b,t),s=t.getAttribute("id");E[s]=e,e.enableValidation()})),t.addEventListener("click",(()=>{u.setInputValues(m.getUserInfo()),u.open(),E["profile-form"].resetValidation()})),e.addEventListener("click",(()=>{h.open(),E["card-add-form"].resetValidation()})),c.getUser().then((t=>{m.setUserInfo(t)})).catch((t=>{console.error(t)})),c.getUserInformation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3RCRSxvQkFBcUIsZ0NBQ3JCRSxnQkFBaUIsMEJBQ2pCRSxXQUFZLDRCQUNaRSxpQkFBa0Isb0JLa0NEbUIsTUFBTUMsS0FBS3BGLFNBQVNxRixpQkFBaUJvSCxFQUFPRSxlQUNwRHpILFNBQVM5QixJQUNoQixNQUFNd0osRUFBWSxJQUFJMUosRUFBY3VKLEVBQVFySixHQUN0Q3lKLEVBQVd6SixFQUFZMEosYUFBYSxNQUUxQ04sRUFBZUssR0FBWUQsRUFDM0JBLEVBQVV0SCxrQkFBa0IsSUFRaEN2RixFQUFrQmtELGlCQUFpQixTQUFTLEtBQzFDbUksRUFBaUI5RCxlQUFlK0QsRUFBdUJXLGVBQ3ZEWixFQUFpQnZGLE9BQ2pCMkcsRUFBZSxnQkFBZ0J2SCxpQkFBaUIsSUFJbEQvRSxFQUFjK0MsaUJBQWlCLFNBQVMsS0FDdENnSSxFQUFjcEYsT0FDZDJHLEVBQWUsaUJBQWlCdkgsaUJBQWlCLElBa0huRHdDLEVBQ0dtQixVQUNBVCxNQUFNQyxJQUNMaUQsRUFBdUJDLFlBQVlsRCxFQUFJLElBRXhDeUMsT0FBT0MsSUFDTkMsUUFBUUMsTUFBTUYsRUFBSSxJQUd0QnJELEVBQUlpQixvQiIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIkdvYXQgaW4gYSBmaWVsZFwiLFxyXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTUwNjA3NjE3Nzg5My04OWQ1NDc5NGVmNDE/cT04MCZ3PTE5NzQmYXV0bz1mb3JtYXQmZml0PWNyb3AmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlNub3d5IGxhbmRzY2FwZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTcwOTQwMzMzNjYwMS1jNjk0YjAyZDA0ZWM/cT04MCZ3PTE5NzQmYXV0bz1mb3JtYXQmZml0PWNyb3AmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkNvYXN0bGluZSBcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE3MDczNDM4NDM5ODItZjgyNzVmMzk5NGM1P3E9ODAmdz0xOTMyJmF1dG89Zm9ybWF0JmZpdD1jcm9wJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREY4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJHYWxheHkgb2Ygc3RhcnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE3MDk0MDMzMzg1MjctODIyOTkxMmIzYTY3P3E9ODAmdz0xOTMyJmF1dG89Zm9ybWF0JmZpdD1jcm9wJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJNb3VudCBFdmVyZXN0XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTc1ODE5NzE5Nzk4LTgzZDk3ZGQ2OTQ5Yz9xPTgwJnc9MjA2OSZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiU2Nob29sIG9mIGZpc2hcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE3MDczMjc5NTY4NTEtMzBhNTMxYjcwY2RhP3E9ODAmdz0yMDcwJmF1dG89Zm9ybWF0JmZpdD1jcm9wJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREY4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxyXG4gIH0sXHJcbl07XHJcblxyXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcblxyXG4vKiBFbGVtZW50cyAqL1xyXG4vLyBFbGVtZW50cyB1c2VkIHRvIG9wZW4gYW5kIGNsb3NlIHRoZSBFZGl0IFByb2ZpbGUgTW9kYWwgYW5kIENhcmQgQWRkIE1vZGFsXHJcblxyXG5jb25zdCBhZGRDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5cclxuY29uc3QgY2FyZEltYWdlRGlzcGxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGhvdG9zLWRpc3BsYXktbW9kYWxcIik7XHJcblxyXG4vL0VsZW1lbnRzIHVzZWQgZm9yIHBob3RvcyB0ZW1wbGF0ZXNcclxuY29uc3QgcGhvdG9DYXJkTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9zX19saXN0XCIpO1xyXG5cclxuXHJcbmNvbnN0IGNhcmRJbWFnZURpc3BsYXlMaW5rID0gY2FyZEltYWdlRGlzcGxheS5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLm1vZGFsX19waG90b3MtbGlua1wiXHJcbik7XHJcblxyXG5jb25zdCBjYXJkSW1hZ2VEaXNwbGF5TmFtZSA9IGNhcmRJbWFnZURpc3BsYXkucXVlcnlTZWxlY3RvcihcclxuICBcIi5tb2RhbF9fcGhvdG9zLXRpdGxlXCJcclxuKTtcclxuXHJcbmNvbnN0IGF2YXRhckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyLWJ0blwiKTtcclxuXHJcbmNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fY29udGFpbmVyXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zdWJtaXQtYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc3VibWl0LWJ1dHRvbl9pbmFjdGl2ZVwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxyXG4gIGZpZWxkc2V0U2VsZWN0b3I6IFwiLm1vZGFsX19maWVsZHNldFwiLFxyXG59O1xyXG5cclxuZXhwb3J0IHtcclxuICBpbml0aWFsQ2FyZHMsXHJcbiAgcHJvZmlsZUVkaXRCdXR0b24sXHJcbiAgYWRkQ2FyZEJ1dHRvbixcclxuICBwaG90b0NhcmRMaXN0LFxyXG4gIGNhcmRJbWFnZURpc3BsYXlMaW5rLFxyXG4gIGNhcmRJbWFnZURpc3BsYXlOYW1lLFxyXG4gIHZhbGlkYXRpb25Db25maWcsXHJcbiAgYXZhdGFyQnV0dG9uXHJcbn07XHJcbiIsImNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaywgaGFuZGxlRGVsZXRlQ2FyZCwgaGFuZGxlTGlrZUNhcmQpIHtcclxuICAgIHRoaXMuX2NhcmROYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fY2FyZEFsdCA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCA9IGhhbmRsZURlbGV0ZUNhcmQ7XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2FyZCA9IGhhbmRsZUxpa2VDYXJkXHJcbiAgICB0aGlzLl9pZCA9IGRhdGEuX2lkO1xyXG4gICAgdGhpcy5faXNMaWtlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgX2dldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5waG90b3NfX2NhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBob3Rvc19fbGlrZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5waG90b3NfX2RlbGV0ZS1idXR0b25cIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9zX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50TmFtZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9zX19jYXB0aW9uXCIpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9zX19pbWFnZVwiKTtcclxuICB9XHJcblxyXG4gIF9zZXRDYXJkRGF0YSgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50TmFtZS50ZXh0Q29udGVudCA9IHRoaXMuX2NhcmROYW1lO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRJbWFnZS5zcmMgPSB0aGlzLl9jYXJkSW1hZ2U7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudEltYWdlLmFsdCA9IHRoaXMuX2NhcmROYW1lO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZEVsZW1lbnQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9nZXRWaWV3KCk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fc2V0Q2FyZERhdGEoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBnZXRDYXJkSWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faWQ7XHJcbiAgfVxyXG5cclxuICBnZXRDYXJkSXNMaWtlZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pc0xpa2VkO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgbGlrZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJwaG90b3NfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgIHRoaXMuX2lzTGlrZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgZGlzbGlrZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJwaG90b3NfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgIHRoaXMuX2lzTGlrZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIC8vICAgdGhpcy5faGFuZGxlTGlrZUNhcmQoKTtcclxuICAgIC8vIH0pO1xyXG5cclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKHRoaXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soeyBuYW1lOiB0aGlzLl9jYXJkTmFtZSwgbGluazogdGhpcy5fY2FyZEltYWdlIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQ2FyZCh0aGlzKTtcclxuICAgIH0pXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBDYXJkIH07XHJcbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcih2YWxpZGF0aW9uQ29uZmlnLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHZhbGlkYXRpb25Db25maWcuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gdmFsaWRhdGlvbkNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSB2YWxpZGF0aW9uQ29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSB2YWxpZGF0aW9uQ29uZmlnLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSB2YWxpZGF0aW9uQ29uZmlnLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9maWVsZHNldFNlbGVjdG9yID0gdmFsaWRhdGlvbkNvbmZpZy5maWVsZHNldFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9jbG9zZU9uT3ZlcmxheUNsaWNrKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2Nsb3NlT25Fc2NLZXkpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5fY2xvc2VPbk92ZXJsYXlDbGljayk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9jbG9zZU9uRXNjS2V5KTtcclxuICB9XHJcblxyXG4gIF9jbG9zZU9uT3ZlcmxheUNsaWNrID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfY2xvc2VPbkVzY0tleSA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG5cclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NvbnRhaW5lclwiKTtcclxuICAgIHRoaXMuX3BvcHVwQXJyYXkgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX3BvcHVwQXJyYXkpO1xyXG4gICAgdGhpcy5fb3JpZ2luYWxTdWJtaXRUZXh0ID0gdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWUoKSB7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldExvYWRpbmcoaXNMb2FkaW5nKSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9vcmlnaW5hbFN1Ym1pdFRleHQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRTdWJtaXQoaGFuZGxlU3VibWl0KSB7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlU3VibWl0O1xyXG4gIH1cclxuXHJcbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZSgpKTtcclxuICAgICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQge1xyXG4gIGluaXRpYWxDYXJkcyxcclxuICBwcm9maWxlRWRpdEJ1dHRvbixcclxuICBhZGRDYXJkQnV0dG9uLFxyXG4gIHBob3RvQ2FyZExpc3QsXHJcbiAgdmFsaWRhdGlvbkNvbmZpZyxcclxuICBhdmF0YXJCdXR0b24sXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwLmpzXCI7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IHsgUG9wdXBXaXRoRm9ybSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgeyBBcGkgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuXHJcbmF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGF2YXRhclVwZGF0ZVBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCJiODhiNzcwZi05NjY1LTQ4NjItYmM3YS0xYTVhYThjNDE0N2FcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgcmVuZGVyZXI6IChpdGVtLCBtZXRob2QgPSBcInByZXBlbmRcIikgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoaXRlbSk7XHJcbiAgICAgIHBob3RvQ2FyZExpc3RbbWV0aG9kXShjYXJkRWxlbWVudCk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgXCIjY2FyZC1hZGQtZm9ybVwiXHJcbik7XHJcblxyXG4vL0dldHRpbmcgdGhlIGxpc3Qgb2YgY2FyZHMgZnJvbSB0aGUgc2VydmVyIGFuZCBkaXNwbGF5aW5nIGl0IG9uIHRoZSBmb3JtXHJcbmFwaVxyXG4gIC5nZXRJbml0aWFsQ2FyZHMoKVxyXG4gIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfSlcclxuICAudGhlbigocmVzKSA9PiB7XHJcbiAgICByZXMuZm9yRWFjaCgocmVzdWx0KSA9PiB7XHJcbiAgICAgIHJlbmRlckNhcmQocmVzdWx0KTtcclxuICAgIH0pO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICB9KTtcclxuXHJcbi8vIENsYXNzIGFzc2lnbm1lbnQgZm9yIGFsbCBwb3B1cHNcclxuY29uc3QgY2FyZEZvcm1Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI2NhcmQtYWRkLW1vZGFsXCIsXHJcbiAgaGFuZGxlQ2FyZEZvcm1TdWJtaXRcclxuKTtcclxuY2FyZEZvcm1Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgcHJvZmlsZUZvcm1Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxyXG4gIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0XHJcbik7XHJcbnByb2ZpbGVGb3JtUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHBob3RvQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3Bob3Rvcy1kaXNwbGF5LW1vZGFsXCIpO1xyXG5waG90b0NhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgdXNlclByb2ZpbGVJbmZvcm1hdGlvbiA9IG5ldyBVc2VySW5mbyhcclxuICBcIi5wcm9maWxlX19uYW1lXCIsXHJcbiAgXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIixcclxuICBcIi5wcm9maWxlX19hdmF0YXItcGljdHVyZVwiXHJcbik7XHJcblxyXG5jb25zdCBkZWxldGVDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNkZWxldGUtY2FyZC1tb2RhbFwiKTtcclxuZGVsZXRlQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBhdmF0YXJVcGRhdGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI2F2YXRhci11cGRhdGUtbW9kYWxcIixcclxuICBoYW5kbGVBdmF0YXJVcGRhdGVcclxuKTtcclxuYXZhdGFyVXBkYXRlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vRm9ybSB2YWxpZGF0b3JzXHJcbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XHJcblxyXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcclxuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtRWxlbWVudCk7XHJcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZShcImlkXCIpO1xyXG5cclxuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcclxuICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5lbmFibGVWYWxpZGF0aW9uKHZhbGlkYXRpb25Db25maWcpO1xyXG5cclxuLyogRXZlbnQgTGlzdGVuZXJzICovXHJcbi8vRXZlbnQgTGlzdGVuZXJzIGZvciBvcGVuaW5nIGFuZCBjbG9zaW5nIHRoZSBlZGl0IHByb2ZpbGUgbW9kYWxcclxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwcm9maWxlRm9ybVBvcHVwLnNldElucHV0VmFsdWVzKHVzZXJQcm9maWxlSW5mb3JtYXRpb24uZ2V0VXNlckluZm8oKSk7XHJcbiAgcHJvZmlsZUZvcm1Qb3B1cC5vcGVuKCk7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJwcm9maWxlLWZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxuLy9FdmVudCBMaXN0ZW5lcnMgZm9yIG9wZW5pbmcgYW5kIGNsb3NpbmcgdGhlIGFkZCBjYXJkIG1vZGFsXHJcbmFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjYXJkRm9ybVBvcHVwLm9wZW4oKTtcclxuICBmb3JtVmFsaWRhdG9yc1tcImNhcmQtYWRkLWZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxuLy9VcGRhdGluZyBwcm9maWxlIGluZm9ybWF0aW9uXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGlucHV0VmFsdWVzKSB7XHJcbiAgcHJvZmlsZUZvcm1Qb3B1cC5zZXRMb2FkaW5nKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLnVwZGF0ZVVzZXJJbmZvcm1hdGlvbihpbnB1dFZhbHVlcylcclxuICAgIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgcmV0dXJuIHJlc3VsdC5qc29uKCk7XHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKHVzZXJJbmZvcm1hdGlvbikgPT4ge1xyXG4gICAgICB1c2VyUHJvZmlsZUluZm9ybWF0aW9uLnNldFVzZXJJbmZvKHVzZXJJbmZvcm1hdGlvbik7XHJcbiAgICAgIHByb2ZpbGVGb3JtUG9wdXAuc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KHByb2ZpbGVGb3JtUG9wdXAuY2xvc2UoKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoZWxlbWVudCkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgIGVsZW1lbnQsXHJcbiAgICBcIiNwaG90b3MtdGVtcGxhdGVcIixcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBoYW5kbGVDYXJkRGVsZXRlLFxyXG4gICAgaGFuZGxlTGlrZUNhcmRcclxuICApO1xyXG4gIHJldHVybiBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgcGhvdG9DYXJkUG9wdXAub3Blbih7IG5hbWUsIGxpbmsgfSk7XHJcbn1cclxuXHJcbi8vIFN1Ym1pdHRpbmcgYSBuZXcgY2FyZCB0byB0aGUgc2VydmVyXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRGb3JtU3VibWl0KGlucHV0VmFsdWVzKSB7XHJcbiAgY2FyZEZvcm1Qb3B1cC5zZXRMb2FkaW5nKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLmFkZENhcmQoaW5wdXRWYWx1ZXMpXHJcbiAgICAudGhlbigocmVzdWx0KSA9PiByZXN1bHQuanNvbigpKVxyXG4gICAgLnRoZW4oKG5ld0NhcmQpID0+IHtcclxuICAgICAgcmVuZGVyQ2FyZChuZXdDYXJkKTtcclxuICAgICAgY2FyZEZvcm1Qb3B1cC5zZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoY2FyZEZvcm1Qb3B1cC5jbG9zZSgpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZChpdGVtLCBtZXRob2QgPSBcInByZXBlbmRcIikge1xyXG4gIGNhcmRTZWN0aW9uLmFkZEl0ZW0oaXRlbSk7XHJcbn1cclxuXHJcbi8vRGVsZXRlIGNhcmRcclxuZnVuY3Rpb24gaGFuZGxlQ2FyZERlbGV0ZShjYXJkKSB7XHJcbiAgY29uc3QgY2FyZElkID0gY2FyZC5nZXRDYXJkSWQoKTtcclxuICBkZWxldGVDYXJkUG9wdXAub3BlbigpO1xyXG4gIGRlbGV0ZUNhcmRQb3B1cC5zZXRTdWJtaXQoKCkgPT4ge1xyXG4gICAgZGVsZXRlQ2FyZFBvcHVwLnNldExvYWRpbmcodHJ1ZSk7XHJcbiAgICBhcGlcclxuICAgICAgLmRlbGV0ZUNhcmQoY2FyZElkKVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgY2FyZC5kZWxldGVDYXJkKCk7XHJcbiAgICAgICAgZGVsZXRlQ2FyZFBvcHVwLnNldExvYWRpbmcoZmFsc2UpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIGRlbGV0aW5nIGNhcmQ6XCIsIGVycm9yKTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkoZGVsZXRlQ2FyZFBvcHVwLmNsb3NlKCkpO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vL2hhbmRsZXMgYm90aCBsaWtlIGFuZCBkaXNsaWtlIG9mIGNhcmRzXHJcbmZ1bmN0aW9uIGhhbmRsZUxpa2VDYXJkKGNhcmQpIHtcclxuICBjb25zdCBjYXJkSWQgPSBjYXJkLmdldENhcmRJZCgpO1xyXG4gIGNvbnN0IGNhcmRMaWtlZCA9IGNhcmQuZ2V0Q2FyZElzTGlrZWQoKTtcclxuICBpZiAoY2FyZExpa2VkID09IGZhbHNlKSB7XHJcbiAgICBhcGlcclxuICAgICAgLmxpa2VDYXJkKGNhcmRJZClcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGNhcmQubGlrZUNhcmQoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiBsaWtpbmcgY2FyZDpcIiwgZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICB9IGVsc2Uge1xyXG4gICAgYXBpXHJcbiAgICAgIC5kaXNsaWtlQ2FyZChjYXJkSWQpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBjYXJkLmRpc2xpa2VDYXJkKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gZGlzbGlraW5nIGNhcmQ6IFwiLCBlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuLy91cGRhdGluZyB0aGUgYXZhdGFyXHJcbmZ1bmN0aW9uIGhhbmRsZUF2YXRhclVwZGF0ZSh7IG5hbWU6IGlucHV0VmFsdWUgfSkge1xyXG4gIGFwaVxyXG4gICAgLnVkcGF0ZUF2YXRhcihpbnB1dFZhbHVlKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICB1c2VyUHJvZmlsZUluZm9ybWF0aW9uLnNldFVzZXJBdmF0YXIoaW5wdXRWYWx1ZSk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gdXBkYXRpbmcgYXZhdGFyOiBcIiwgZXJyb3IpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KGF2YXRhclVwZGF0ZVBvcHVwLmNsb3NlKCkpO1xyXG59XHJcblxyXG4vLyBHZXQgdXNlciBkYXRhIGZyb20gdGhlIHNlcnZlclxyXG5hcGlcclxuICAuZ2V0VXNlcigpXHJcbiAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgdXNlclByb2ZpbGVJbmZvcm1hdGlvbi5zZXRVc2VySW5mbyhyZXMpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICB9KTtcclxuXHJcbmFwaS5nZXRVc2VySW5mb3JtYXRpb24oKTtcclxuIiwiY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBvcHRpb25zLmJhc2VVcmw7XHJcbiAgICB0aGlzLl9hdXRoVG9rZW4gPSBvcHRpb25zLmhlYWRlcnMuYXV0aG9yaXphdGlvbjtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhUb2tlbixcclxuICAgICAgfSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mb3JtYXRpb24oKSB7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuZ2V0VXNlcigpLCB0aGlzLmdldEluaXRpYWxDYXJkcygpXSk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VyKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aFRva2VuLFxyXG4gICAgICB9LFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVVzZXJJbmZvcm1hdGlvbih1c2VySW5mb3JtYXRpb24pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRoVG9rZW4sXHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiB1c2VySW5mb3JtYXRpb24ubmFtZSxcclxuICAgICAgICBhYm91dDogdXNlckluZm9ybWF0aW9uLmFib3V0LFxyXG4gICAgICB9KSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkQ2FyZChlbGVtZW50KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRoVG9rZW4sXHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBlbGVtZW50Lm5hbWUsXHJcbiAgICAgICAgbGluazogZWxlbWVudC5saW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhUb2tlbixcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgfSxcclxuICAgICAgbWVzc2FnZTogXCJUaGlzIHBvc3QgaGFzIGJlZW4gZGVsZXRlZFwiLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBsaWtlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhUb2tlbixcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGlzbGlrZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRoVG9rZW4sXHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIH0sXHJcbiAgICB9KS50aGVuKChyZXMpID0+IChyZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QocmVzLnN0YXR1c1RleHQpKSk7XHJcbiAgfVxyXG5cclxuICB1ZHBhdGVBdmF0YXIoZGF0YSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRoVG9rZW4sXHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IGRhdGEsXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiAocmVzLm9rID8gcmVzLmpzb24oKSA6IFByb21pc2UucmVqZWN0KHJlcy5zdGF0dXNUZXh0KSkpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgQXBpIH07XHJcbiIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjbGFzc1NlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2xhc3NTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGl0ZW0pIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0sIFwiYXBwZW5kXCIpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2ltYWdlVGl0bGUgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fcGhvdG9zLXRpdGxlXCIpO1xyXG4gICAgdGhpcy5faW1hZ2VMaW5rID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3Bob3Rvcy1saW5rXCIpO1xyXG4gIH1cclxuXHJcbiAgb3Blbih7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgdGhpcy5faW1hZ2VUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9pbWFnZUxpbmsuc3JjID0gbGluaztcclxuICAgIHRoaXMuX2ltYWdlTGluay5hbHQgPSBuYW1lO1xyXG5cclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByb2ZpbGVOYW1lU2VsZWN0b3IsXHJcbiAgICBwcm9maWxlRGVzY3JpcHRpb25TZWxlY3RvcixcclxuICAgIHByb2ZpbGVBdmF0YXJTZWxlY3RvclxyXG4gICkge1xyXG4gICAgdGhpcy5fcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVOYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgcHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl9wcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlQXZhdGFyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgYWJvdXQ6IHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCxcclxuICAgICAgYXZhdGFyOiB0aGlzLl9wcm9maWxlQXZhdGFyLnNyYyxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7XHJcbiAgICBuYW1lOiBwcm9maWxlTmFtZSxcclxuICAgIGFib3V0OiBwcm9maWxlRGVzY3JpcHRpb24sXHJcbiAgICBhdmF0YXI6IHByb2ZpbGVBdmF0YXIsXHJcbiAgfSkge1xyXG4gICAgdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBwcm9maWxlTmFtZTtcclxuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHByb2ZpbGVEZXNjcmlwdGlvbjtcclxuICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIuc3JjID0gcHJvZmlsZUF2YXRhcjtcclxuICB9XHJcblxyXG4gIHNldFVzZXJBdmF0YXIocHJvZmlsZUF2YXRhcikge1xyXG4gICAgdGhpcy5fcHJvZmlsZUF2YXRhci5zcmMgPSBwcm9maWxlQXZhdGFyO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsicHJvZmlsZUVkaXRCdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRDYXJkQnV0dG9uIiwiY2FyZEltYWdlRGlzcGxheSIsInBob3RvQ2FyZExpc3QiLCJhdmF0YXJCdXR0b24iLCJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsImhhbmRsZURlbGV0ZUNhcmQiLCJoYW5kbGVMaWtlQ2FyZCIsInRoaXMiLCJfY2FyZE5hbWUiLCJuYW1lIiwiX2NhcmRJbWFnZSIsImxpbmsiLCJfY2FyZEFsdCIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9oYW5kbGVEZWxldGVDYXJkIiwiX2hhbmRsZUxpa2VDYXJkIiwiX2lkIiwiX2lzTGlrZWQiLCJfZ2V0VmlldyIsIl9jYXJkRWxlbWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfbGlrZUJ1dHRvbiIsIl9kZWxldGVCdXR0b24iLCJfY2FyZEltYWdlQnV0dG9uIiwiX2NhcmRFbGVtZW50TmFtZSIsIl9jYXJkRWxlbWVudEltYWdlIiwiX3NldENhcmREYXRhIiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJnZXRDYXJkRWxlbWVudCIsImdlbmVyYXRlQ2FyZCIsIl9zZXRFdmVudExpc3RlbmVycyIsImdldENhcmRJZCIsImdldENhcmRJc0xpa2VkIiwiZGVsZXRlQ2FyZCIsInJlbW92ZSIsImxpa2VDYXJkIiwiY2xhc3NMaXN0IiwiYWRkIiwiZGlzbGlrZUNhcmQiLCJhZGRFdmVudExpc3RlbmVyIiwiRm9ybVZhbGlkYXRvciIsInZhbGlkYXRpb25Db25maWciLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9maWVsZHNldFNlbGVjdG9yIiwiZmllbGRzZXRTZWxlY3RvciIsIl9mb3JtRWxlbWVudCIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfaGFzSW52YWxpZElucHV0IiwiX2J1dHRvbkVsZW1lbnQiLCJkaXNhYmxlZCIsIl9pbnB1dExpc3QiLCJzb21lIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJyZXNldFZhbGlkYXRpb24iLCJmb3JFYWNoIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImVuYWJsZVZhbGlkYXRpb24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfY2xvc2VCdXR0b24iLCJvcGVuIiwiX2Nsb3NlT25PdmVybGF5Q2xpY2siLCJfY2xvc2VPbkVzY0tleSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInRhcmdldCIsImNvbnRhaW5zIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfc3VibWl0QnV0dG9uIiwiX3BvcHVwRm9ybSIsIl9wb3B1cEFycmF5IiwiX29yaWdpbmFsU3VibWl0VGV4dCIsIl9nZXRJbnB1dFZhbHVlIiwiaW5wdXRWYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwic2V0TG9hZGluZyIsImlzTG9hZGluZyIsInNldFN1Ym1pdCIsImhhbmRsZVN1Ym1pdCIsInNldElucHV0VmFsdWVzIiwicmVzZXQiLCJhdmF0YXJVcGRhdGVQb3B1cCIsImFwaSIsIm9wdGlvbnMiLCJfb3B0aW9ucyIsIl9iYXNlVXJsIiwiYmFzZVVybCIsIl9hdXRoVG9rZW4iLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwidGhlbiIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRVc2VySW5mb3JtYXRpb24iLCJhbGwiLCJnZXRVc2VyIiwidXBkYXRlVXNlckluZm9ybWF0aW9uIiwidXNlckluZm9ybWF0aW9uIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhYm91dCIsImFkZENhcmQiLCJlbGVtZW50IiwiY2FyZElkIiwibWVzc2FnZSIsInN0YXR1c1RleHQiLCJ1ZHBhdGVBdmF0YXIiLCJhdmF0YXIiLCJjYXJkU2VjdGlvbiIsIl9yZWYiLCJjbGFzc1NlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJhZGRJdGVtIiwiaXRlbSIsInJlbmRlckl0ZW1zIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiY2FyZEVsZW1lbnQiLCJoYW5kbGVDYXJkRGVsZXRlIiwicmVzdWx0IiwicmVuZGVyQ2FyZCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiY2FyZEZvcm1Qb3B1cCIsIm5ld0NhcmQiLCJmaW5hbGx5IiwicHJvZmlsZUZvcm1Qb3B1cCIsInVzZXJQcm9maWxlSW5mb3JtYXRpb24iLCJzZXRVc2VySW5mbyIsInBob3RvQ2FyZFBvcHVwIiwiX2ltYWdlVGl0bGUiLCJfaW1hZ2VMaW5rIiwicHJvZmlsZU5hbWVTZWxlY3RvciIsInByb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yIiwicHJvZmlsZUF2YXRhclNlbGVjdG9yIiwiX3Byb2ZpbGVOYW1lIiwiX3Byb2ZpbGVEZXNjcmlwdGlvbiIsIl9wcm9maWxlQXZhdGFyIiwiZ2V0VXNlckluZm8iLCJwcm9maWxlTmFtZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsInByb2ZpbGVBdmF0YXIiLCJzZXRVc2VyQXZhdGFyIiwiZGVsZXRlQ2FyZFBvcHVwIiwiX3JlZjIiLCJpbnB1dFZhbHVlIiwiZm9ybVZhbGlkYXRvcnMiLCJjb25maWciLCJjYXJkIiwiZm9ybVNlbGVjdG9yIiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiXSwic291cmNlUm9vdCI6IiJ9