!function(){"use strict";const t=document.querySelector(".profile__edit-button"),e=document.querySelector(".profile__add-button"),s=document.querySelector("#photos-display-modal"),i=document.querySelector(".photos__list");s.querySelector(".modal__photos-link"),s.querySelector(".modal__photos-title");class o{constructor(t,e,s,i,o){this._cardName=t.name,this._cardImage=t.link,this._cardAlt=t.name,this._cardSelector=e,this._handleImageClick=s,this._handleDeleteCard=i,this._handleLikeCard=o,this._id=t._id,this._isLiked=!1}_getView(){this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".photos__card").cloneNode(!0),this._likeButton=this._cardElement.querySelector(".photos__like-button"),this._deleteButton=this._cardElement.querySelector(".photos__delete-button"),this._cardImageButton=this._cardElement.querySelector(".photos__image"),this._cardElementName=this._cardElement.querySelector(".photos__caption"),this._cardElementImage=this._cardElement.querySelector(".photos__image")}_setCardData(){this._cardElementName.textContent=this._cardName,this._cardElementImage.src=this._cardImage,this._cardElementImage.alt=this._cardName}getCardElement(){return this._cardElement}generateCard(){return this._getView(),this._setEventListeners(),this._setCardData(),this._cardElement}getCardId(){return this._id}getCardIsLiked(){return this._isLiked}deleteCard(){this._cardElement.remove(),this._cardElement=null}likeCard(){this._likeButton.classList.add("photos__like-button_active"),this._isLiked=!0}dislikeCard(){this._likeButton.classList.remove("photos__like-button_active"),this._isLiked=!1}_setEventListeners(){this._deleteButton.addEventListener("click",(()=>{this._handleDeleteCard(this)})),this._cardImageButton.addEventListener("click",(()=>{this._handleImageClick({name:this._cardName,link:this._cardImage})})),this._likeButton.addEventListener("click",(()=>{this._handleLikeCard(this)}))}}class n{constructor(t,e){this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._fieldsetSelector=t.fieldsetSelector,this._formElement=e}_showInputError(t){const e=this._formElement.querySelector(`.${t.id}-error`);t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)}_hideInputError(t){const e=this._formElement.querySelector(`.${t.id}-error`);t.classList.remove(this._inputErrorClass),e.classList.remove(this._errorClass),e.textContent=""}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_hasInvalidInput(){return this._inputList.some((t=>!t.validity.valid))}_checkInputValidity(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}resetValidation(){this._toggleButtonState(),this._inputList.forEach((t=>{this._hideInputError(t)}))}_setEventListeners(){this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this._toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(function(t){t.preventDefault()})),this._setEventListeners()}}class r{constructor(t){this._popupElement=document.querySelector(t),this._closeButton=this._popupElement.querySelector(".modal__close-button")}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("mousedown",this._closeOnOverlayClick),document.addEventListener("keydown",this._closeOnEscKey)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("mousedown",this._closeOnOverlayClick),document.removeEventListener("keydown",this._closeOnEscKey)}_closeOnOverlayClick=t=>{t.target.classList.contains("modal_opened")&&this.close()};_closeOnEscKey=t=>{"Escape"===t.key&&this.close()};setEventListeners(){this._closeButton.addEventListener("click",(()=>{this.close()}))}}class a extends r{constructor(t,e){super(t),this._handleFormSubmit=e,this._submitButton=this._popupElement.querySelector(".modal__submit-button"),this._popupForm=this._popupElement.querySelector(".modal__container"),this._popupArray=this._popupElement.querySelectorAll(".modal__input"),this._inputList=Array.from(this._popupArray),this._originalSubmitText=this._submitButton.textContent}_getInputValue(){const t={};return this._inputList.forEach((e=>{t[e.name]=e.value})),t}setLoading(t){this._submitButton.textContent=t?"Saving...":this._originalSubmitText}setSubmit(t){this._handleFormSubmit=t}setInputValues(t){this._inputList.forEach((e=>{e.value=t[e.name]}))}setEventListeners(){this._popupForm.addEventListener("submit",(()=>{this._handleFormSubmit(this._getInputValue()),this._popupForm.reset()})),super.setEventListeners()}}const l=new class{constructor(t){this._options=t,this._baseUrl=t.baseUrl,this._authToken=t.headers.authorization}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:{authorization:this._authToken}}).then((t=>t.ok?t.json():Promise.reject(`Error: ${t.status}`)))}getUserInformation(){return Promise.all([this.getUser(),this.getInitialCards()])}getUser(){return fetch(`${this._baseUrl}/users/me`,{headers:{authorization:this._authToken}}).then((t=>t.ok?t.json():Promise.reject(`Error: ${t.status}`)))}updateUserInformation(t){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:{authorization:this._authToken,"Content-Type":"application/json"},body:JSON.stringify({name:t.name,about:t.about})})}addCard(t){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:{authorization:this._authToken,"Content-Type":"application/json"},body:JSON.stringify({name:t.name,link:t.link})})}deleteCard(t){return fetch(`${this._baseUrl}/cards/${t}`,{method:"DELETE",headers:{authorization:this._authToken,"Content-Type":"application/json"},message:"This post has been deleted"})}likeCard(t){return fetch(`${this._baseUrl}/cards/${t}/likes`,{method:"PUT",headers:{authorization:this._authToken,"Content-Type":"application/json"}})}dislikeCard(t){return fetch(`${this._baseUrl}/cards/${t}/likes`,{method:"DELETE",headers:{authorization:this._authToken,"Content-Type":"application/json"}})}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"b88b770f-9665-4862-bc7a-1a5aa8c4147a","Content-Type":"application/json"}}),c=new class{constructor(t,e){let{items:s,renderer:i}=t;this._items=s,this._renderer=i,this._container=document.querySelector(e)}addItem(t){this._renderer(t)}renderItems(){console.log(this._items,"items"),this._items.forEach((t=>{this._renderer(t,"append")}))}}({items:[{name:"Goat in a field",link:"https://images.unsplash.com/photo-1506076177893-89d54794ef41?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Snowy landscape",link:"https://images.unsplash.com/photo-1709403336601-c694b02d04ec?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Coastline ",link:"https://images.unsplash.com/photo-1707343843982-f8275f3994c5?q=80&w=1932&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Galaxy of stars",link:"https://images.unsplash.com/photo-1709403338527-8229912b3a67?q=80&w=1932&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Mount Everest",link:"https://images.unsplash.com/photo-1575819719798-83d97dd6949c?q=80&w=2069&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"School of fish",link:"https://images.unsplash.com/photo-1707327956851-30a531b70cda?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"}],renderer:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"prepend";const s=new o(t,"#photos-template",E,g,k).generateCard();i[e](s)}},"#card-add-form");l.getInitialCards().then((t=>t)).then((t=>{t.forEach((t=>{b(t)}))})).catch((t=>{console.error(t)}));const d=new a("#card-add-modal",(function(t){console.log(t),l.addCard(t).then((t=>t.json())).then((t=>{b(t)})).catch((t=>{console.error(t)})).finally(d.close())}));d.setEventListeners();const h=new a("#profile-edit-modal",(function(t){l.updateUserInformation(t).then((t=>t.json())).then((t=>{_.setUserInfo(t)})).catch((t=>{console.error(t)})).finally(h.close())}));h.setEventListeners();const u=new class extends r{constructor(t){super(t),this._imageTitle=this._popupElement.querySelector(".modal__photos-title"),this._imageLink=this._popupElement.querySelector(".modal__photos-link")}open(t){let{name:e,link:s}=t;this._imageTitle.textContent=e,this._imageLink.src=s,this._imageLink.alt=e,super.open()}}("#photos-display-modal"),_=new class{constructor(t,e){this._profileName=document.querySelector(t),this._profileDescription=document.querySelector(e)}getUserInfo(){return{name:this._profileName.textContent,about:this._profileDescription.textContent}}setUserInfo(t){let{name:e,about:s}=t;this._profileName.textContent=e,this._profileDescription.textContent=s}}(".profile__name",".profile__description");u.setEventListeners();const m=new a("#delete-card-modal");m.setEventListeners();const p={};var f;function E(t){let{name:e,link:s}=t;u.open({name:e,link:s})}function b(t){c.addItem(t)}function g(t){const e=t.getCardId();m.open(),m.setSubmit((()=>{m.setLoading(!0),l.deleteCard(e).then((()=>{console.log(t,"Card deleted successfully"),t.deleteCard(),m.close(),m.setLoading(!1)})).catch((t=>{console.error("Error in deleting card:",t)}))}))}function k(t){console.log("===="),console.log(t);const e=t.getCardId(),s=t.getCardIsLiked();console.log(s,"like status"),0==s?l.likeCard(e).then((()=>{console.log("card is liked"),t.likeCard()})).catch((t=>{console.error("Error in liking card:",t)})):l.dislikeCard(e).then((()=>{console.log("card is disliked"),t.dislikeCard()})).catch((t=>{console.error("Error in disliking card: ",t)}))}f={formSelector:".modal__container",inputSelector:".modal__input",submitButtonSelector:".modal__submit-button",inactiveButtonClass:"modal__submit-button_inactive",inputErrorClass:"modal__input_type_error",errorClass:"modal__input-error_active",fieldsetSelector:".modal__fieldset"},Array.from(document.querySelectorAll(f.formSelector)).forEach((t=>{const e=new n(f,t),s=t.getAttribute("id");p[s]=e,e.enableValidation()})),t.addEventListener("click",(()=>{h.setInputValues(_.getUserInfo()),h.open(),p["profile-form"].resetValidation()})),e.addEventListener("click",(()=>{d.open(),p["card-add-form"].resetValidation()})),l.getUser().then((t=>{console.log(t)})).catch((t=>{console.error(t)})),l.getUserInformation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFRQyxJQUFJLGlCQUNaOEIsRUFBS25KLFVBQVUsSUFFaEI2SCxPQUFPRSxJQUNOWCxRQUFRVyxNQUFNLHdCQUF5QkEsRUFBTSxJQUdqRHBELEVBQ0d4RSxZQUFZcUcsR0FDWm5CLE1BQUssS0FDSitCLFFBQVFDLElBQUksb0JBQ1o4QixFQUFLaEosYUFBYSxJQUVuQjBILE9BQU9FLElBQ05YLFFBQVFXLE1BQU0sNEJBQTZCQSxFQUFNLEdBR3pELENBdEowQm1CLEVML0JELENBQ3ZCRyxhQUFjLG9CQUNkNUksY0FBZSxnQkFDZkUscUJBQXNCLHdCQUN0QkUsb0JBQXFCLGdDQUNyQkUsZ0JBQWlCLDBCQUNqQkUsV0FBWSw0QkFDWkUsaUJBQWtCLG9CS3lCRG1CLE1BQU1DLEtBQUtuRixTQUFTb0YsaUJBQWlCMEcsRUFBT0csZUFDcERoSCxTQUFTOUIsSUFDaEIsTUFBTStJLEVBQVksSUFBSWpKLEVBQWM2SSxFQUFRM0ksR0FDdENnSixFQUFXaEosRUFBWWlKLGFBQWEsTUFFMUNQLEVBQWVNLEdBQVlELEVBQzNCQSxFQUFVN0csa0JBQWtCLElBUWhDdEYsRUFBa0JpRCxpQkFBaUIsU0FBUyxLQUMxQytILEVBQWlCMUQsZUFBZTJELEVBQXVCUyxlQUN2RFYsRUFBaUJuRixPQUNqQmlHLEVBQWUsZ0JBQWdCN0csaUJBQWlCLElBSWxEOUUsRUFBYzhDLGlCQUFpQixTQUFTLEtBQ3RDNEgsRUFBY2hGLE9BQ2RpRyxFQUFlLGlCQUFpQjdHLGlCQUFpQixJQWdJbkR1QyxFQUNHbUIsVUFDQVQsTUFBTXNDLElBQ0xQLFFBQVFDLElBQUlNLEVBQU8sSUFFcEJFLE9BQU9DLElBQ05WLFFBQVFXLE1BQU1ELEVBQUksSUFHdEJuRCxFQUFJaUIsb0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJHb2F0IGluIGEgZmllbGRcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MDYwNzYxNzc4OTMtODlkNTQ3OTRlZjQxP3E9ODAmdz0xOTc0JmF1dG89Zm9ybWF0JmZpdD1jcm9wJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJTbm93eSBsYW5kc2NhcGVcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE3MDk0MDMzMzY2MDEtYzY5NGIwMmQwNGVjP3E9ODAmdz0xOTc0JmF1dG89Zm9ybWF0JmZpdD1jcm9wJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJDb2FzdGxpbmUgXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNzA3MzQzODQzOTgyLWY4Mjc1ZjM5OTRjNT9xPTgwJnc9MTkzMiZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRGOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiR2FsYXh5IG9mIHN0YXJzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNzA5NDAzMzM4NTI3LTgyMjk5MTJiM2E2Nz9xPTgwJnc9MTkzMiZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTW91bnQgRXZlcmVzdFwiLFxyXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU3NTgxOTcxOTc5OC04M2Q5N2RkNjk0OWM/cT04MCZ3PTIwNjkmYXV0bz1mb3JtYXQmZml0PWNyb3AmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlNjaG9vbCBvZiBmaXNoXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNzA3MzI3OTU2ODUxLTMwYTUzMWI3MGNkYT9xPTgwJnc9MjA3MCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRGOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcclxuICB9LFxyXG5dO1xyXG5cclxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xyXG5cclxuLyogRWxlbWVudHMgKi9cclxuLy8gRWxlbWVudHMgdXNlZCB0byBvcGVuIGFuZCBjbG9zZSB0aGUgRWRpdCBQcm9maWxlIE1vZGFsIGFuZCBDYXJkIEFkZCBNb2RhbFxyXG5cclxuY29uc3QgYWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuXHJcbmNvbnN0IGNhcmRJbWFnZURpc3BsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Bob3Rvcy1kaXNwbGF5LW1vZGFsXCIpO1xyXG5cclxuLy9FbGVtZW50cyB1c2VkIGZvciBwaG90b3MgdGVtcGxhdGVzXHJcbmNvbnN0IHBob3RvQ2FyZExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBob3Rvc19fbGlzdFwiKTtcclxuXHJcblxyXG5jb25zdCBjYXJkSW1hZ2VEaXNwbGF5TGluayA9IGNhcmRJbWFnZURpc3BsYXkucXVlcnlTZWxlY3RvcihcclxuICBcIi5tb2RhbF9fcGhvdG9zLWxpbmtcIlxyXG4pO1xyXG5jb25zdCBjYXJkSW1hZ2VEaXNwbGF5TmFtZSA9IGNhcmRJbWFnZURpc3BsYXkucXVlcnlTZWxlY3RvcihcclxuICBcIi5tb2RhbF9fcGhvdG9zLXRpdGxlXCJcclxuKTtcclxuXHJcbmNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fY29udGFpbmVyXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zdWJtaXQtYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc3VibWl0LWJ1dHRvbl9pbmFjdGl2ZVwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxyXG4gIGZpZWxkc2V0U2VsZWN0b3I6IFwiLm1vZGFsX19maWVsZHNldFwiLFxyXG59O1xyXG5cclxuZXhwb3J0IHtcclxuICBpbml0aWFsQ2FyZHMsXHJcbiAgcHJvZmlsZUVkaXRCdXR0b24sXHJcbiAgYWRkQ2FyZEJ1dHRvbixcclxuICBwaG90b0NhcmRMaXN0LFxyXG4gIGNhcmRJbWFnZURpc3BsYXlMaW5rLFxyXG4gIGNhcmRJbWFnZURpc3BsYXlOYW1lLFxyXG4gIHZhbGlkYXRpb25Db25maWcsXHJcbn07XHJcbiIsImNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaywgaGFuZGxlRGVsZXRlQ2FyZCwgaGFuZGxlTGlrZUNhcmQpIHtcclxuICAgIHRoaXMuX2NhcmROYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fY2FyZEFsdCA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCA9IGhhbmRsZURlbGV0ZUNhcmQ7XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2FyZCA9IGhhbmRsZUxpa2VDYXJkXHJcbiAgICB0aGlzLl9pZCA9IGRhdGEuX2lkO1xyXG4gICAgdGhpcy5faXNMaWtlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgX2dldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5waG90b3NfX2NhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBob3Rvc19fbGlrZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5waG90b3NfX2RlbGV0ZS1idXR0b25cIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9zX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50TmFtZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9zX19jYXB0aW9uXCIpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9zX19pbWFnZVwiKTtcclxuICB9XHJcblxyXG4gIF9zZXRDYXJkRGF0YSgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50TmFtZS50ZXh0Q29udGVudCA9IHRoaXMuX2NhcmROYW1lO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRJbWFnZS5zcmMgPSB0aGlzLl9jYXJkSW1hZ2U7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudEltYWdlLmFsdCA9IHRoaXMuX2NhcmROYW1lO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZEVsZW1lbnQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9nZXRWaWV3KCk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fc2V0Q2FyZERhdGEoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBnZXRDYXJkSWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faWQ7XHJcbiAgfVxyXG5cclxuICBnZXRDYXJkSXNMaWtlZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pc0xpa2VkO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgbGlrZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJwaG90b3NfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgIHRoaXMuX2lzTGlrZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgZGlzbGlrZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJwaG90b3NfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgIHRoaXMuX2lzTGlrZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIC8vICAgdGhpcy5faGFuZGxlTGlrZUNhcmQoKTtcclxuICAgIC8vIH0pO1xyXG5cclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKHRoaXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soeyBuYW1lOiB0aGlzLl9jYXJkTmFtZSwgbGluazogdGhpcy5fY2FyZEltYWdlIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQ2FyZCh0aGlzKTtcclxuICAgIH0pXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBDYXJkIH07XHJcbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcih2YWxpZGF0aW9uQ29uZmlnLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHZhbGlkYXRpb25Db25maWcuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gdmFsaWRhdGlvbkNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSB2YWxpZGF0aW9uQ29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSB2YWxpZGF0aW9uQ29uZmlnLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSB2YWxpZGF0aW9uQ29uZmlnLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9maWVsZHNldFNlbGVjdG9yID0gdmFsaWRhdGlvbkNvbmZpZy5maWVsZHNldFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9jbG9zZU9uT3ZlcmxheUNsaWNrKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2Nsb3NlT25Fc2NLZXkpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5fY2xvc2VPbk92ZXJsYXlDbGljayk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9jbG9zZU9uRXNjS2V5KTtcclxuICB9XHJcblxyXG4gIF9jbG9zZU9uT3ZlcmxheUNsaWNrID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9jbG9zZU9uRXNjS2V5ID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuXHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX3N1Ym1pdC1idXR0b25cIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jb250YWluZXJcIik7XHJcbiAgICB0aGlzLl9wb3B1cEFycmF5ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9wb3B1cEFycmF5KTtcclxuICAgIHRoaXMuX29yaWdpbmFsU3VibWl0VGV4dCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlKCkge1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRMb2FkaW5nKGlzTG9hZGluZykge1xyXG4gICAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fb3JpZ2luYWxTdWJtaXRUZXh0O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0U3VibWl0KGhhbmRsZVN1Ym1pdCkge1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcclxuICB9XHJcblxyXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWUoKSk7XHJcbiAgICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHtcclxuICBpbml0aWFsQ2FyZHMsXHJcbiAgcHJvZmlsZUVkaXRCdXR0b24sXHJcbiAgYWRkQ2FyZEJ1dHRvbixcclxuICBwaG90b0NhcmRMaXN0LFxyXG4gIHZhbGlkYXRpb25Db25maWcsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwLmpzXCI7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IHsgUG9wdXBXaXRoRm9ybSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IHsgUG9wdXBXaXRoRGVsZXRlIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRGVsZXRlLmpzXCI7XHJcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHsgQXBpIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCJiODhiNzcwZi05NjY1LTQ4NjItYmM3YS0xYTVhYThjNDE0N2FcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgcmVuZGVyZXI6IChpdGVtLCBtZXRob2QgPSBcInByZXBlbmRcIikgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoaXRlbSk7XHJcbiAgICAgIHBob3RvQ2FyZExpc3RbbWV0aG9kXShjYXJkRWxlbWVudCk7XHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKHBob3RvQ2FyZExpc3QpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIFwiI2NhcmQtYWRkLWZvcm1cIlxyXG4pO1xyXG4vLyBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG5cclxuYXBpXHJcbiAgLmdldEluaXRpYWxDYXJkcygpXHJcbiAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9KVxyXG4gIC50aGVuKChyZXMpID0+IHtcclxuICAgIHJlcy5mb3JFYWNoKChyZXN1bHQpID0+IHtcclxuICAgICAgcmVuZGVyQ2FyZChyZXN1bHQpO1xyXG4gICAgfSk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gIH0pO1xyXG5cclxuY29uc3QgY2FyZEZvcm1Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI2NhcmQtYWRkLW1vZGFsXCIsXHJcbiAgaGFuZGxlQ2FyZEZvcm1TdWJtaXRcclxuKTtcclxuY2FyZEZvcm1Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgcHJvZmlsZUZvcm1Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxyXG4gIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0XHJcbik7XHJcbnByb2ZpbGVGb3JtUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHBob3RvQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3Bob3Rvcy1kaXNwbGF5LW1vZGFsXCIpO1xyXG5cclxuY29uc3QgdXNlclByb2ZpbGVJbmZvcm1hdGlvbiA9IG5ldyBVc2VySW5mbyhcclxuICBcIi5wcm9maWxlX19uYW1lXCIsXHJcbiAgXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIlxyXG4pO1xyXG5waG90b0NhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgZGVsZXRlQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjZGVsZXRlLWNhcmQtbW9kYWxcIik7XHJcbmRlbGV0ZUNhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcclxuXHJcbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XHJcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3RvcikpO1xyXG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XHJcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm1FbGVtZW50KTtcclxuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiaWRcIik7XHJcblxyXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xyXG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICB9KTtcclxufTtcclxuXHJcbmVuYWJsZVZhbGlkYXRpb24odmFsaWRhdGlvbkNvbmZpZyk7XHJcblxyXG4vKiBFdmVudCBMaXN0ZW5lcnMgKi9cclxuLy9FdmVudCBMaXN0ZW5lcnMgZm9yIG9wZW5pbmcgYW5kIGNsb3NpbmcgdGhlIGVkaXQgcHJvZmlsZSBtb2RhbFxyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHByb2ZpbGVGb3JtUG9wdXAuc2V0SW5wdXRWYWx1ZXModXNlclByb2ZpbGVJbmZvcm1hdGlvbi5nZXRVc2VySW5mbygpKTtcclxuICBwcm9maWxlRm9ybVBvcHVwLm9wZW4oKTtcclxuICBmb3JtVmFsaWRhdG9yc1tcInByb2ZpbGUtZm9ybVwiXS5yZXNldFZhbGlkYXRpb24oKTtcclxufSk7XHJcblxyXG4vL0V2ZW50IExpc3RlbmVycyBmb3Igb3BlbmluZyBhbmQgY2xvc2luZyB0aGUgYWRkIGNhcmQgbW9kYWxcclxuYWRkQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNhcmRGb3JtUG9wdXAub3BlbigpO1xyXG4gIGZvcm1WYWxpZGF0b3JzW1wiY2FyZC1hZGQtZm9ybVwiXS5yZXNldFZhbGlkYXRpb24oKTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdChpbnB1dFZhbHVlcykge1xyXG4gIC8vIHByb2ZpbGVGb3JtUG9wdXAuc2V0U3VibWl0KCgpID0+IHtcclxuICAgIC8vIHByb2ZpbGVGb3JtUG9wdXAuc2V0TG9hZGluZyh0cnVlKTtcclxuICAgIGFwaVxyXG4gICAgICAudXBkYXRlVXNlckluZm9ybWF0aW9uKGlucHV0VmFsdWVzKVxyXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5qc29uKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKCh1c2VySW5mb3JtYXRpb24pID0+IHtcclxuICAgICAgICB1c2VyUHJvZmlsZUluZm9ybWF0aW9uLnNldFVzZXJJbmZvKHVzZXJJbmZvcm1hdGlvbik7XHJcbiAgICAgICAgLy8gcHJvZmlsZUZvcm1Qb3B1cC5jbG9zZSgpO1xyXG4gICAgICAgIC8vIHByb2ZpbGVGb3JtUG9wdXAuc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICB9KVxyXG4gICAgICAuZmluYWxseShwcm9maWxlRm9ybVBvcHVwLmNsb3NlKCkpO1xyXG4gIC8vIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGVsZW1lbnQpIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICBlbGVtZW50LFxyXG4gICAgXCIjcGhvdG9zLXRlbXBsYXRlXCIsXHJcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxyXG4gICAgaGFuZGxlQ2FyZERlbGV0ZSxcclxuICAgIGhhbmRsZUxpa2VDYXJkXHJcbiAgKTtcclxuICByZXR1cm4gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxufVxyXG5cclxuLy8gZnVuY3Rpb24gY3JlYXRlQ2FyZChlbGVtZW50KSB7XHJcbi8vICAgYXBpLmFkZENhcmQoZWxlbWVudClcclxuLy8gICAgIC50aGVuKHJlc3VsdCA9PiB7XHJcbi8vICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbi8vICAgICAgIHJldHVybiByZXN1bHQ7XHJcbi8vICAgICB9KVxyXG4vLyAgICAgLnRoZW4ocmVzID0+IHtcclxuLy8gICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4vLyAgICAgICAgICAgICByZXMsXHJcbi8vICAgICAgICAgICAgIFwiI3Bob3Rvcy10ZW1wbGF0ZVwiLFxyXG4vLyAgICAgICAgICAgICBoYW5kbGVJbWFnZUNsaWNrLFxyXG4vLyAgICAgICAgICAgICBoYW5kbGVEZWxldGVCdG5DbGlja1xyXG4vLyAgICAgICAgICAgKTtcclxuLy8gICAgICAgICAgIGNvbnNvbGUubG9nKGNhcmQpO1xyXG4vLyAgICAgICAgICAgcmV0dXJuIGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbi8vICAgICB9KVxyXG4vLyAgICAgLmNhdGNoKGVyciA9PiB7XHJcbi8vICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuLy8gICAgIH0pXHJcbi8vIH1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soeyBuYW1lLCBsaW5rIH0pIHtcclxuICBwaG90b0NhcmRQb3B1cC5vcGVuKHsgbmFtZSwgbGluayB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZEZvcm1TdWJtaXQoaW5wdXRWYWx1ZXMpIHtcclxuICAvLyBjYXJkRm9ybVBvcHVwLnNldFN1Ym1pdCgoKSA9PiB7XHJcbiAgLy8gICBjYXJkRm9ybVBvcHVwLnNldExvYWRpbmcodHJ1ZSk7XHJcbiAgY29uc29sZS5sb2coaW5wdXRWYWx1ZXMpO1xyXG4gIGFwaVxyXG4gICAgLmFkZENhcmQoaW5wdXRWYWx1ZXMpXHJcbiAgICAudGhlbigocmVzdWx0KSA9PiByZXN1bHQuanNvbigpKVxyXG4gICAgLnRoZW4oKG5ld0NhcmQpID0+IHtcclxuICAgICAgcmVuZGVyQ2FyZChuZXdDYXJkKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoY2FyZEZvcm1Qb3B1cC5jbG9zZSgpKTtcclxuICAvLyB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZChpdGVtLCBtZXRob2QgPSBcInByZXBlbmRcIikge1xyXG4gIGNhcmRTZWN0aW9uLmFkZEl0ZW0oaXRlbSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmREZWxldGUoY2FyZCkge1xyXG4gIGNvbnN0IGNhcmRJZCA9IGNhcmQuZ2V0Q2FyZElkKCk7XHJcbiAgZGVsZXRlQ2FyZFBvcHVwLm9wZW4oKTtcclxuICBkZWxldGVDYXJkUG9wdXAuc2V0U3VibWl0KCgpID0+IHtcclxuICAgIGRlbGV0ZUNhcmRQb3B1cC5zZXRMb2FkaW5nKHRydWUpO1xyXG4gICAgYXBpXHJcbiAgICAgIC5kZWxldGVDYXJkKGNhcmRJZClcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGNhcmQsIFwiQ2FyZCBkZWxldGVkIHN1Y2Nlc3NmdWxseVwiKTtcclxuICAgICAgICBjYXJkLmRlbGV0ZUNhcmQoKTtcclxuICAgICAgICBkZWxldGVDYXJkUG9wdXAuY2xvc2UoKTtcclxuICAgICAgICBkZWxldGVDYXJkUG9wdXAuc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gZGVsZXRpbmcgY2FyZDpcIiwgZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlTGlrZUNhcmQoY2FyZCkge1xyXG4gIGNvbnNvbGUubG9nKFwiPT09PVwiKTtcclxuICBjb25zb2xlLmxvZyhjYXJkKTtcclxuICBjb25zdCBjYXJkSWQgPSBjYXJkLmdldENhcmRJZCgpO1xyXG4gIGNvbnN0IGNhcmRMaWtlZCA9IGNhcmQuZ2V0Q2FyZElzTGlrZWQoKTtcclxuICBjb25zb2xlLmxvZyhjYXJkTGlrZWQsIFwibGlrZSBzdGF0dXNcIik7XHJcbiAgaWYgKGNhcmRMaWtlZCA9PSBmYWxzZSkge1xyXG4gICAgYXBpXHJcbiAgICAgIC5saWtlQ2FyZChjYXJkSWQpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImNhcmQgaXMgbGlrZWRcIik7XHJcbiAgICAgICAgY2FyZC5saWtlQ2FyZCgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIGxpa2luZyBjYXJkOlwiLCBlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBhcGlcclxuICAgICAgLmRpc2xpa2VDYXJkKGNhcmRJZClcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiY2FyZCBpcyBkaXNsaWtlZFwiKTtcclxuICAgICAgICBjYXJkLmRpc2xpa2VDYXJkKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gZGlzbGlraW5nIGNhcmQ6IFwiLCBlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuYXBpXHJcbiAgLmdldFVzZXIoKVxyXG4gIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gIH0pO1xyXG5cclxuYXBpLmdldFVzZXJJbmZvcm1hdGlvbigpO1xyXG4iLCJjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgLy8gKHsgYmFzZVVybDogdGhpcy5fYmFzZVVybCwgaGVhZGVyczogdGhpcy5faGVhZGVycyB9ID0gb3B0aW9ucyk7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xyXG4gICAgdGhpcy5fYXV0aFRva2VuID0gb3B0aW9ucy5oZWFkZXJzLmF1dGhvcml6YXRpb247XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRoVG9rZW4sXHJcbiAgICAgIH0sXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm9ybWF0aW9uKCkge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldFVzZXIoKSwgdGhpcy5nZXRJbml0aWFsQ2FyZHMoKV0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlcigpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhUb2tlbixcclxuICAgICAgfSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVVc2VySW5mb3JtYXRpb24odXNlckluZm9ybWF0aW9uKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aFRva2VuLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogdXNlckluZm9ybWF0aW9uLm5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IHVzZXJJbmZvcm1hdGlvbi5hYm91dCxcclxuICAgICAgfSksXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZENhcmQoZWxlbWVudCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aFRva2VuLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogZWxlbWVudC5uYW1lLFxyXG4gICAgICAgIGxpbms6IGVsZW1lbnQubGluayxcclxuICAgICAgfSksXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRoVG9rZW4sXHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIFwibWVzc2FnZVwiOiBcIlRoaXMgcG9zdCBoYXMgYmVlbiBkZWxldGVkXCJcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgbGlrZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRoVG9rZW4sXHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRpc2xpa2VDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aFRva2VuLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIFxyXG59XHJcblxyXG5leHBvcnQgeyBBcGkgfTtcclxuIiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNsYXNzU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjbGFzc1NlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oaXRlbSkge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIGNvbnNvbGUubG9nKHRoaXMuX2l0ZW1zLCBcIml0ZW1zXCIpO1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtLCBcImFwcGVuZFwiKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbWFnZVRpdGxlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3Bob3Rvcy10aXRsZVwiKTtcclxuICAgIHRoaXMuX2ltYWdlTGluayA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19waG90b3MtbGlua1wiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHRoaXMuX2ltYWdlVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5faW1hZ2VMaW5rLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9pbWFnZUxpbmsuYWx0ID0gbmFtZTtcclxuXHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IocHJvZmlsZU5hbWVTZWxlY3RvciwgcHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlTmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHByb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgYWJvdXQ6IHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWU6IHByb2ZpbGVOYW1lLCBhYm91dDogcHJvZmlsZURlc2NyaXB0aW9uIH0pIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gcHJvZmlsZU5hbWU7XHJcbiAgICB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBwcm9maWxlRGVzY3JpcHRpb247XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJwcm9maWxlRWRpdEJ1dHRvbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImFkZENhcmRCdXR0b24iLCJjYXJkSW1hZ2VEaXNwbGF5IiwicGhvdG9DYXJkTGlzdCIsIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlRGVsZXRlQ2FyZCIsImhhbmRsZUxpa2VDYXJkIiwidGhpcyIsIl9jYXJkTmFtZSIsIm5hbWUiLCJfY2FyZEltYWdlIiwibGluayIsIl9jYXJkQWx0IiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJfaGFuZGxlTGlrZUNhcmQiLCJfaWQiLCJfaXNMaWtlZCIsIl9nZXRWaWV3IiwiX2NhcmRFbGVtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsIl9saWtlQnV0dG9uIiwiX2RlbGV0ZUJ1dHRvbiIsIl9jYXJkSW1hZ2VCdXR0b24iLCJfY2FyZEVsZW1lbnROYW1lIiwiX2NhcmRFbGVtZW50SW1hZ2UiLCJfc2V0Q2FyZERhdGEiLCJ0ZXh0Q29udGVudCIsInNyYyIsImFsdCIsImdldENhcmRFbGVtZW50IiwiZ2VuZXJhdGVDYXJkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiZ2V0Q2FyZElkIiwiZ2V0Q2FyZElzTGlrZWQiLCJkZWxldGVDYXJkIiwicmVtb3ZlIiwibGlrZUNhcmQiLCJjbGFzc0xpc3QiLCJhZGQiLCJkaXNsaWtlQ2FyZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJGb3JtVmFsaWRhdG9yIiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2ZpZWxkc2V0U2VsZWN0b3IiLCJmaWVsZHNldFNlbGVjdG9yIiwiX2Zvcm1FbGVtZW50IiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JFbGVtZW50IiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfYnV0dG9uRWxlbWVudCIsImRpc2FibGVkIiwiX2lucHV0TGlzdCIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInJlc2V0VmFsaWRhdGlvbiIsImZvckVhY2giLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9jbG9zZUJ1dHRvbiIsIm9wZW4iLCJfY2xvc2VPbk92ZXJsYXlDbGljayIsIl9jbG9zZU9uRXNjS2V5IiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwidGFyZ2V0IiwiY29udGFpbnMiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9zdWJtaXRCdXR0b24iLCJfcG9wdXBGb3JtIiwiX3BvcHVwQXJyYXkiLCJfb3JpZ2luYWxTdWJtaXRUZXh0IiwiX2dldElucHV0VmFsdWUiLCJpbnB1dFZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJzZXRMb2FkaW5nIiwiaXNMb2FkaW5nIiwic2V0U3VibWl0IiwiaGFuZGxlU3VibWl0Iiwic2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsImFwaSIsIm9wdGlvbnMiLCJfb3B0aW9ucyIsIl9iYXNlVXJsIiwiYmFzZVVybCIsIl9hdXRoVG9rZW4iLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwidGhlbiIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRVc2VySW5mb3JtYXRpb24iLCJhbGwiLCJnZXRVc2VyIiwidXBkYXRlVXNlckluZm9ybWF0aW9uIiwidXNlckluZm9ybWF0aW9uIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhYm91dCIsImFkZENhcmQiLCJlbGVtZW50IiwiY2FyZElkIiwiY2FyZFNlY3Rpb24iLCJfcmVmIiwiY2xhc3NTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiYWRkSXRlbSIsIml0ZW0iLCJyZW5kZXJJdGVtcyIsImNvbnNvbGUiLCJsb2ciLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJjYXJkRWxlbWVudCIsImhhbmRsZUNhcmREZWxldGUiLCJyZXN1bHQiLCJyZW5kZXJDYXJkIiwiY2F0Y2giLCJlcnIiLCJlcnJvciIsImNhcmRGb3JtUG9wdXAiLCJuZXdDYXJkIiwiZmluYWxseSIsInByb2ZpbGVGb3JtUG9wdXAiLCJ1c2VyUHJvZmlsZUluZm9ybWF0aW9uIiwic2V0VXNlckluZm8iLCJwaG90b0NhcmRQb3B1cCIsIl9pbWFnZVRpdGxlIiwiX2ltYWdlTGluayIsInByb2ZpbGVOYW1lU2VsZWN0b3IiLCJwcm9maWxlRGVzY3JpcHRpb25TZWxlY3RvciIsIl9wcm9maWxlTmFtZSIsIl9wcm9maWxlRGVzY3JpcHRpb24iLCJnZXRVc2VySW5mbyIsInByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2NyaXB0aW9uIiwiZGVsZXRlQ2FyZFBvcHVwIiwiZm9ybVZhbGlkYXRvcnMiLCJjb25maWciLCJjYXJkIiwiY2FyZExpa2VkIiwiZm9ybVNlbGVjdG9yIiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiXSwic291cmNlUm9vdCI6IiJ9