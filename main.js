!function(){"use strict";const t=document.querySelector(".profile__edit-button"),e=document.querySelector(".profile__add-button"),s=document.querySelector("#photos-display-modal"),o=document.querySelector(".photos__list");s.querySelector(".modal__photos-link"),s.querySelector(".modal__photos-title");class i{constructor(t,e,s){this._cardName=t.name,this._cardImage=t.link,this._cardAlt=t.name,this._cardSelector=e,this._handleImageClick=s}_getView(){this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".photos__card").cloneNode(!0),this._likeButton=this._cardElement.querySelector(".photos__like-button"),this._deleteButton=this._cardElement.querySelector(".photos__delete-button"),this._cardImageButton=this._cardElement.querySelector(".photos__image"),this._cardElementName=this._cardElement.querySelector(".photos__caption"),this._cardElementImage=this._cardElement.querySelector(".photos__image")}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}_handleLikeCard(){this._likeButton.classList.toggle("photos__like-button_active")}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeCard()})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardImageButton.addEventListener("click",(()=>{this._handleImageClick({name:this._cardName,link:this._cardImage})}))}_setCardData(){this._cardElementName.textContent=this._cardName,this._cardElementImage.src=this._cardImage,this._cardElementImage.alt=this._cardName}getCardElement(){return this._cardElement}generateCard(){return this._getView(),this._setEventListeners(),this._setCardData(),this._cardElement}}class r{constructor(t,e){this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._fieldsetSelector=t.fieldsetSelector,this._formElement=e}_showInputError(t){const e=this._formElement.querySelector(`.${t.id}-error`);t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)}_hideInputError(t){const e=this._formElement.querySelector(`.${t.id}-error`);t.classList.remove(this._inputErrorClass),e.classList.remove(this._errorClass),e.textContent=""}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_hasInvalidInput(){return this._inputList.some((t=>!t.validity.valid))}_checkInputValidity(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}resetValidation(){this._toggleButtonState(),this._inputList.forEach((t=>{this._hideInputError(t)}))}_setEventListeners(){this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this._toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(function(t){t.preventDefault()})),this._setEventListeners()}}class n{constructor(t){this._popupElement=document.querySelector(t),this._closeButton=this._popupElement.querySelector(".modal__close-button")}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("mousedown",this._closeOnOverlayClick),document.addEventListener("keydown",this._closeOnEscKey)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("mousedown",this._closeOnOverlayClick),document.removeEventListener("keydown",this._closeOnEscKey)}_closeOnOverlayClick=t=>{t.target.classList.contains("modal_opened")&&this.close()};_closeOnEscKey=t=>{"Escape"===t.key&&this.close()};setEventListeners(){this._closeButton.addEventListener("click",(()=>{this.close()}))}}class a extends n{constructor(t,e){super(t),this._handleFormSubmit=e,this._submitButton=this._popupElement.querySelector(".modal__submit-button"),this._popupForm=this._popupElement.querySelector(".modal__container"),this._popupArray=this._popupElement.querySelectorAll(".modal__input"),this._inputList=Array.from(this._popupArray)}_getInputValue(){const t={};return this._inputList.forEach((e=>{t[e.name]=e.value})),t}setInputValues(t){this._inputList.forEach((e=>{e.value=t[e.name]}))}setEventListeners(){this._popupForm.addEventListener("submit",(()=>{this._handleFormSubmit(this._getInputValue()),this._popupForm.reset()})),super.setEventListeners()}}const l=new class{constructor(t,e){let{items:s,renderer:o}=t;this._items=s,this._renderer=o,this._container=document.querySelector(e)}addItem(t){this._renderer(t)}renderItems(){this._items.forEach((t=>{this._renderer(t,"append")}))}}({items:[{name:"Goat in a field",link:"https://images.unsplash.com/photo-1506076177893-89d54794ef41?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Snowy landscape",link:"https://images.unsplash.com/photo-1709403336601-c694b02d04ec?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Coastline ",link:"https://images.unsplash.com/photo-1707343843982-f8275f3994c5?q=80&w=1932&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Galaxy of stars",link:"https://images.unsplash.com/photo-1709403338527-8229912b3a67?q=80&w=1932&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Mount Everest",link:"https://images.unsplash.com/photo-1575819719798-83d97dd6949c?q=80&w=2069&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"School of fish",link:"https://images.unsplash.com/photo-1707327956851-30a531b70cda?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"}],renderer:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"prepend";const s=new i(t,"#photos-template",f).generateCard();o[e](s)}},"#card-add-form");l.renderItems();const c=new a("#card-add-modal",(function(t){var e;e=t,l.addItem(e),c.close()}));c.setEventListeners();const d=new a("#profile-edit-modal",(function(t){m.updateUserInformation(t).then((t=>{t.json()})).catch((t=>{console.error(t)})),console.log("test"),d.close()}));d.setEventListeners();const h=new class extends n{constructor(t){super(t),this._imageTitle=this._popupElement.querySelector(".modal__photos-title"),this._imageLink=this._popupElement.querySelector(".modal__photos-link")}open(t){let{name:e,link:s}=t;this._imageTitle.textContent=e,this._imageLink.src=s,this._imageLink.alt=e,super.open()}}("#photos-display-modal"),u=new class{constructor(t,e){this._profileName=document.querySelector(t),this._profileDescription=document.querySelector(e)}getUserInfo(){return{name:this._profileName.textContent,about:this._profileDescription.textContent}}setUserInfo(t){let{name:e,about:s}=t;this._profileName.textContent=e,this._profileDescription.textContent=s}}(".profile__name",".profile__description");h.setEventListeners();const m=new class{constructor(t){this._options=t,({baseUrl:this._baseUrl,headers:this._headers}=t)}getInitialCards(){return fetch("https://around-api.en.tripleten-services.com/v1/cards",{headers:{authorization:"b88b770f-9665-4862-bc7a-1a5aa8c4147a"}}).then((t=>t.ok?t.json():Promise.reject(`Error: ${t.status}`)))}getUserInformation(){return Promise.all()}getUser(){return fetch("https://around-api.en.tripleten-services.com/v1/users/me",{headers:{authorization:"b88b770f-9665-4862-bc7a-1a5aa8c4147a"}}).then((t=>t.ok?t.json():Promise.reject(`Error: ${t.status}`)))}updateUserInformation(){return fetch("https://around-api.en.tripleten-services.com/v1/users/me",{method:"PATCH",headers:{authorization:"b88b770f-9665-4862-bc7a-1a5aa8c4147a","Content-Type":"application/json"},body:JSON.stringify({name:"Marie SkÅ‚odowska Curie",about:"Physicist and Chemist"})})}updateCards(t,e){return fetch("https://around-api.en.tripleten-services.com/v1/cards",{method:"POST",headers:{authorization:"b88b770f-9665-4862-bc7a-1a5aa8c4147a","Content-Type":"application/json"},body:JSON.stringify({name:t,link:e})})}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"b88b770f-9665-4862-bc7a-1a5aa8c4147a","Content-Type":"application/json"}}),_={};var p;function f(t){let{name:e,link:s}=t;h.open({name:e,link:s})}p={formSelector:".modal__container",inputSelector:".modal__input",submitButtonSelector:".modal__submit-button",inactiveButtonClass:"modal__submit-button_inactive",inputErrorClass:"modal__input_type_error",errorClass:"modal__input-error_active",fieldsetSelector:".modal__fieldset"},Array.from(document.querySelectorAll(p.formSelector)).forEach((t=>{const e=new r(p,t),s=t.getAttribute("id");_[s]=e,e.enableValidation()})),t.addEventListener("click",(()=>{d.setInputValues(u.getUserInfo()),d.open(),_["profile-form"].resetValidation()})),e.addEventListener("click",(()=>{c.open(),_["card-add-form"].resetValidation()})),m.getInitialCards().then((t=>{console.log(t)})).catch((t=>{console.error(t)})),m.getUser().then((t=>{console.log(t)})).catch((t=>{console.error(t)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxxQkFBc0Isd0JBQ3RCRSxvQkFBcUIsZ0NBQ3JCRSxnQkFBaUIsMEJBQ2pCRSxXQUFZLDRCQUNaRSxpQkFBa0Isb0JLSURvQixNQUFNQyxLQUFLM0UsU0FBUzRFLGlCQUFpQjZGLEVBQU9DLGVBQ3BEakcsU0FBUy9CLElBQ2hCLE1BQU1pSSxFQUFZLElBQUluSSxFQUFjaUksRUFBUS9ILEdBQ3RDa0ksRUFBV2xJLEVBQVltSSxhQUFhLE1BRTFDTCxFQUFlSSxHQUFZRCxFQUMzQkEsRUFBVTlGLGtCQUFrQixJQVFoQzlFLEVBQWtCa0MsaUJBQWlCLFNBQVMsS0FDMUMwRixFQUFpQm5CLGVBQWVpQyxFQUF1QkssZUFDdkRuQixFQUFpQnZDLE9BQ2pCb0YsRUFBZSxnQkFBZ0JoRyxpQkFBaUIsSUFJbER0RSxFQUFjK0IsaUJBQWlCLFNBQVMsS0FDdEN5RixFQUFjdEMsT0FDZG9GLEVBQWUsaUJBQWlCaEcsaUJBQWlCLElBc0NuRG9ELEVBQUk2QixrQkFDRDNCLE1BQU1DLElBQ0xJLFFBQVFFLElBQUlOLEVBQU8sSUFFcEJFLE9BQU9DLElBQ05DLFFBQVFDLE1BQU1GLEVBQUksSUFHdEJOLEVBQUl1QyxVQUNEckMsTUFBTUMsSUFDTEksUUFBUUUsSUFBSU4sRUFBTyxJQUVwQkUsT0FBTUMsSUFDTEMsUUFBUUMsTUFBTUYsRUFBSSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiR29hdCBpbiBhIGZpZWxkXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTA2MDc2MTc3ODkzLTg5ZDU0Nzk0ZWY0MT9xPTgwJnc9MTk3NCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiU25vd3kgbGFuZHNjYXBlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNzA5NDAzMzM2NjAxLWM2OTRiMDJkMDRlYz9xPTgwJnc9MTk3NCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQ29hc3RsaW5lIFwiLFxyXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTcwNzM0Mzg0Mzk4Mi1mODI3NWYzOTk0YzU/cT04MCZ3PTE5MzImYXV0bz1mb3JtYXQmZml0PWNyb3AmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZERjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkdhbGF4eSBvZiBzdGFyc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTcwOTQwMzMzODUyNy04MjI5OTEyYjNhNjc/cT04MCZ3PTE5MzImYXV0bz1mb3JtYXQmZml0PWNyb3AmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIk1vdW50IEV2ZXJlc3RcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1NzU4MTk3MTk3OTgtODNkOTdkZDY5NDljP3E9ODAmdz0yMDY5JmF1dG89Zm9ybWF0JmZpdD1jcm9wJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJTY2hvb2wgb2YgZmlzaFwiLFxyXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTcwNzMyNzk1Njg1MS0zMGE1MzFiNzBjZGE/cT04MCZ3PTIwNzAmYXV0bz1mb3JtYXQmZml0PWNyb3AmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZERjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcclxuXHJcbi8qIEVsZW1lbnRzICovXHJcbi8vIEVsZW1lbnRzIHVzZWQgdG8gb3BlbiBhbmQgY2xvc2UgdGhlIEVkaXQgUHJvZmlsZSBNb2RhbCBhbmQgQ2FyZCBBZGQgTW9kYWxcclxuXHJcbmNvbnN0IGFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcblxyXG5jb25zdCBjYXJkSW1hZ2VEaXNwbGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwaG90b3MtZGlzcGxheS1tb2RhbFwiKTtcclxuXHJcbi8vRWxlbWVudHMgdXNlZCBmb3IgcGhvdG9zIHRlbXBsYXRlc1xyXG5jb25zdCBwaG90b0NhcmRMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5waG90b3NfX2xpc3RcIik7XHJcblxyXG5cclxuY29uc3QgY2FyZEltYWdlRGlzcGxheUxpbmsgPSBjYXJkSW1hZ2VEaXNwbGF5LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIubW9kYWxfX3Bob3Rvcy1saW5rXCJcclxuKTtcclxuY29uc3QgY2FyZEltYWdlRGlzcGxheU5hbWUgPSBjYXJkSW1hZ2VEaXNwbGF5LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIubW9kYWxfX3Bob3Rvcy10aXRsZVwiXHJcbik7XHJcblxyXG5jb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2NvbnRhaW5lclwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3N1Ym1pdC1idXR0b25faW5hY3RpdmVcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcclxuICBmaWVsZHNldFNlbGVjdG9yOiBcIi5tb2RhbF9fZmllbGRzZXRcIixcclxufTtcclxuXHJcbmV4cG9ydCB7XHJcbiAgaW5pdGlhbENhcmRzLFxyXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxyXG4gIGFkZENhcmRCdXR0b24sXHJcbiAgcGhvdG9DYXJkTGlzdCxcclxuICBjYXJkSW1hZ2VEaXNwbGF5TGluayxcclxuICBjYXJkSW1hZ2VEaXNwbGF5TmFtZSxcclxuICB2YWxpZGF0aW9uQ29uZmlnLFxyXG59O1xyXG4iLCJjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcclxuICAgIHRoaXMuX2NhcmROYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fY2FyZEFsdCA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gIH1cclxuXHJcbiAgX2dldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5waG90b3NfX2NhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBob3Rvc19fbGlrZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5waG90b3NfX2RlbGV0ZS1idXR0b25cIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9zX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50TmFtZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9zX19jYXB0aW9uXCIpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9zX19pbWFnZVwiKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVEZWxldGVDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTGlrZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJwaG90b3NfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUNhcmQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh7IG5hbWU6IHRoaXMuX2NhcmROYW1lLCBsaW5rOiB0aGlzLl9jYXJkSW1hZ2UgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9zZXRDYXJkRGF0YSgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50TmFtZS50ZXh0Q29udGVudCA9IHRoaXMuX2NhcmROYW1lO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRJbWFnZS5zcmMgPSB0aGlzLl9jYXJkSW1hZ2U7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudEltYWdlLmFsdCA9IHRoaXMuX2NhcmROYW1lO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZEVsZW1lbnQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9nZXRWaWV3KCk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fc2V0Q2FyZERhdGEoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBDYXJkIH07XHJcbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcih2YWxpZGF0aW9uQ29uZmlnLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHZhbGlkYXRpb25Db25maWcuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gdmFsaWRhdGlvbkNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSB2YWxpZGF0aW9uQ29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSB2YWxpZGF0aW9uQ29uZmlnLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSB2YWxpZGF0aW9uQ29uZmlnLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9maWVsZHNldFNlbGVjdG9yID0gdmFsaWRhdGlvbkNvbmZpZy5maWVsZHNldFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9jbG9zZU9uT3ZlcmxheUNsaWNrKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2Nsb3NlT25Fc2NLZXkpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5fY2xvc2VPbk92ZXJsYXlDbGljayk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9jbG9zZU9uRXNjS2V5KTtcclxuICB9XHJcblxyXG4gIF9jbG9zZU9uT3ZlcmxheUNsaWNrID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9jbG9zZU9uRXNjS2V5ID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuXHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX3N1Ym1pdC1idXR0b25cIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jb250YWluZXJcIik7XHJcbiAgICB0aGlzLl9wb3B1cEFycmF5ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9wb3B1cEFycmF5KTtcclxuICAgIFxyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWUoKSB7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWUoKSk7XHJcbiAgICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHtcclxuICBpbml0aWFsQ2FyZHMsXHJcbiAgcHJvZmlsZUVkaXRCdXR0b24sXHJcbiAgYWRkQ2FyZEJ1dHRvbixcclxuICBwaG90b0NhcmRMaXN0LFxyXG4gIHZhbGlkYXRpb25Db25maWcsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHsgQXBpIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcblxyXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogKGl0ZW0sIG1ldGhvZCA9IFwicHJlcGVuZFwiKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChpdGVtKTtcclxuICAgICAgcGhvdG9DYXJkTGlzdFttZXRob2RdKGNhcmRFbGVtZW50KTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBcIiNjYXJkLWFkZC1mb3JtXCJcclxuKTtcclxuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuXHJcbmNvbnN0IGNhcmRGb3JtUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNjYXJkLWFkZC1tb2RhbFwiLFxyXG4gIGhhbmRsZUNhcmRGb3JtU3VibWl0XHJcbik7XHJcbmNhcmRGb3JtUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVGb3JtUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcclxuICBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdFxyXG4pO1xyXG5wcm9maWxlRm9ybVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBwaG90b0NhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNwaG90b3MtZGlzcGxheS1tb2RhbFwiKTtcclxuY29uc3QgdXNlclByb2ZpbGVJbmZvcm1hdGlvbiA9IG5ldyBVc2VySW5mbyhcclxuICBcIi5wcm9maWxlX19uYW1lXCIsXHJcbiAgXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIlxyXG4pO1xyXG5waG90b0NhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiYjg4Yjc3MGYtOTY2NS00ODYyLWJjN2EtMWE1YWE4YzQxNDdhXCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuXHJcbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XHJcblxyXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcclxuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtRWxlbWVudCk7XHJcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZShcImlkXCIpO1xyXG5cclxuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcclxuICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5lbmFibGVWYWxpZGF0aW9uKHZhbGlkYXRpb25Db25maWcpO1xyXG5cclxuLyogRXZlbnQgTGlzdGVuZXJzICovXHJcbi8vRXZlbnQgTGlzdGVuZXJzIGZvciBvcGVuaW5nIGFuZCBjbG9zaW5nIHRoZSBlZGl0IHByb2ZpbGUgbW9kYWxcclxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwcm9maWxlRm9ybVBvcHVwLnNldElucHV0VmFsdWVzKHVzZXJQcm9maWxlSW5mb3JtYXRpb24uZ2V0VXNlckluZm8oKSk7XHJcbiAgcHJvZmlsZUZvcm1Qb3B1cC5vcGVuKCk7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJwcm9maWxlLWZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxuLy9FdmVudCBMaXN0ZW5lcnMgZm9yIG9wZW5pbmcgYW5kIGNsb3NpbmcgdGhlIGFkZCBjYXJkIG1vZGFsXHJcbmFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjYXJkRm9ybVBvcHVwLm9wZW4oKTtcclxuICBmb3JtVmFsaWRhdG9yc1tcImNhcmQtYWRkLWZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxuLy8gZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoaW5wdXRWYWx1ZXMpIHtcclxuLy8gICB1c2VyUHJvZmlsZUluZm9ybWF0aW9uLnNldFVzZXJJbmZvKGlucHV0VmFsdWVzKTtcclxuLy8gICBwcm9maWxlRm9ybVBvcHVwLmNsb3NlKCk7XHJcbi8vIH1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGlucHV0VmFsdWVzKSB7XHJcbiAgYXBpLnVwZGF0ZVVzZXJJbmZvcm1hdGlvbihpbnB1dFZhbHVlcylcclxuICAgIC50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgIHJlc3VsdC5qc29uKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgIH0pO1xyXG4gICAgY29uc29sZS5sb2coXCJ0ZXN0XCIpO1xyXG4gIHByb2ZpbGVGb3JtUG9wdXAuY2xvc2UoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChlbGVtZW50KSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGVsZW1lbnQsIFwiI3Bob3Rvcy10ZW1wbGF0ZVwiLCBoYW5kbGVJbWFnZUNsaWNrKTtcclxuICByZXR1cm4gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayh7IG5hbWUsIGxpbmsgfSkge1xyXG4gIHBob3RvQ2FyZFBvcHVwLm9wZW4oeyBuYW1lLCBsaW5rIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDYXJkRm9ybVN1Ym1pdChpbnB1dFZhbHVlcykge1xyXG4gIHJlbmRlckNhcmQoaW5wdXRWYWx1ZXMpO1xyXG4gIGNhcmRGb3JtUG9wdXAuY2xvc2UoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZChpdGVtLCBtZXRob2QgPSBcInByZXBlbmRcIikge1xyXG4gIGNhcmRTZWN0aW9uLmFkZEl0ZW0oaXRlbSk7XHJcbn1cclxuXHJcbmFwaS5nZXRJbml0aWFsQ2FyZHMoKVxyXG4gIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gIH0pO1xyXG5cclxuYXBpLmdldFVzZXIoKVxyXG4gIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbiAgfSlcclxuICAuY2F0Y2goZXJyID0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICB9KVxyXG5cclxuICAvLyBhcGkudXBkYXRlVXNlckluZm9ybWF0aW9uKClcclxuICAvLyAgIC50aGVuKHJlc3VsdCA9PiB7XHJcbiAgLy8gICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbiAgLy8gICB9KVxyXG4gIC8vICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgLy8gICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAvLyAgIH0pXHJcbiIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjbGFzc1NlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2xhc3NTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGl0ZW0pIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0sIFwiYXBwZW5kXCIpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2ltYWdlVGl0bGUgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fcGhvdG9zLXRpdGxlXCIpO1xyXG4gICAgdGhpcy5faW1hZ2VMaW5rID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3Bob3Rvcy1saW5rXCIpO1xyXG4gIH1cclxuXHJcbiAgb3Blbih7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgdGhpcy5faW1hZ2VUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9pbWFnZUxpbmsuc3JjID0gbGluaztcclxuICAgIHRoaXMuX2ltYWdlTGluay5hbHQgPSBuYW1lO1xyXG5cclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcihwcm9maWxlTmFtZVNlbGVjdG9yLCBwcm9maWxlRGVzY3JpcHRpb25TZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVOYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgcHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50LFxyXG4gICAgICBhYm91dDogdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgbmFtZTogcHJvZmlsZU5hbWUsIGFib3V0OiBwcm9maWxlRGVzY3JpcHRpb24gfSkge1xyXG4gICAgdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBwcm9maWxlTmFtZTtcclxuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHByb2ZpbGVEZXNjcmlwdGlvbjtcclxuICB9XHJcbn1cclxuIiwiY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcclxuICAgICh7IGJhc2VVcmw6IHRoaXMuX2Jhc2VVcmwsIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMgfSA9IG9wdGlvbnMpO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjEvY2FyZHNcIiwge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogXCJiODhiNzcwZi05NjY1LTQ4NjItYmM3YS0xYTVhYThjNDE0N2FcIixcclxuICAgICAgfSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mb3JtYXRpb24oKSB7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXIoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MS91c2Vycy9tZVwiLCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiBcImI4OGI3NzBmLTk2NjUtNDg2Mi1iYzdhLTFhNWFhOGM0MTQ3YVwiLFxyXG4gICAgICB9LFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVVzZXJJbmZvcm1hdGlvbigpIHtcclxuICAgIHJldHVybiBmZXRjaChcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxL3VzZXJzL21lXCIsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiBcImI4OGI3NzBmLTk2NjUtNDg2Mi1iYzdhLTFhNWFhOGM0MTQ3YVwiLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogXCJNYXJpZSBTa8WCb2Rvd3NrYSBDdXJpZVwiLFxyXG4gICAgICAgIGFib3V0OiBcIlBoeXNpY2lzdCBhbmQgQ2hlbWlzdFwiLFxyXG4gICAgICB9KSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlQ2FyZHMobmFtZSwgbGluaykge1xyXG4gICAgcmV0dXJuIGZldGNoKFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjEvY2FyZHNcIiwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogXCJiODhiNzcwZi05NjY1LTQ4NjItYmM3YS0xYTVhYThjNDE0N2FcIixcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgbGluazogbGluayxcclxuICAgICAgfSksXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IEFwaSB9O1xyXG4iXSwibmFtZXMiOlsicHJvZmlsZUVkaXRCdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRDYXJkQnV0dG9uIiwiY2FyZEltYWdlRGlzcGxheSIsInBob3RvQ2FyZExpc3QiLCJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsInRoaXMiLCJfY2FyZE5hbWUiLCJuYW1lIiwiX2NhcmRJbWFnZSIsImxpbmsiLCJfY2FyZEFsdCIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9nZXRWaWV3IiwiX2NhcmRFbGVtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsIl9saWtlQnV0dG9uIiwiX2RlbGV0ZUJ1dHRvbiIsIl9jYXJkSW1hZ2VCdXR0b24iLCJfY2FyZEVsZW1lbnROYW1lIiwiX2NhcmRFbGVtZW50SW1hZ2UiLCJfaGFuZGxlRGVsZXRlQ2FyZCIsInJlbW92ZSIsIl9oYW5kbGVMaWtlQ2FyZCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9zZXRFdmVudExpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJfc2V0Q2FyZERhdGEiLCJ0ZXh0Q29udGVudCIsInNyYyIsImFsdCIsImdldENhcmRFbGVtZW50IiwiZ2VuZXJhdGVDYXJkIiwiRm9ybVZhbGlkYXRvciIsInZhbGlkYXRpb25Db25maWciLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9maWVsZHNldFNlbGVjdG9yIiwiZmllbGRzZXRTZWxlY3RvciIsIl9mb3JtRWxlbWVudCIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsImlkIiwiYWRkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfaGFzSW52YWxpZElucHV0IiwiX2J1dHRvbkVsZW1lbnQiLCJkaXNhYmxlZCIsIl9pbnB1dExpc3QiLCJzb21lIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJyZXNldFZhbGlkYXRpb24iLCJmb3JFYWNoIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImVuYWJsZVZhbGlkYXRpb24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfY2xvc2VCdXR0b24iLCJvcGVuIiwiX2Nsb3NlT25PdmVybGF5Q2xpY2siLCJfY2xvc2VPbkVzY0tleSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInRhcmdldCIsImNvbnRhaW5zIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfc3VibWl0QnV0dG9uIiwiX3BvcHVwRm9ybSIsIl9wb3B1cEFycmF5IiwiX2dldElucHV0VmFsdWUiLCJpbnB1dFZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJzZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiY2FyZFNlY3Rpb24iLCJfcmVmIiwiY2xhc3NTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiYWRkSXRlbSIsIml0ZW0iLCJyZW5kZXJJdGVtcyIsIm1ldGhvZCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImNhcmRFbGVtZW50IiwiY2FyZEZvcm1Qb3B1cCIsInByb2ZpbGVGb3JtUG9wdXAiLCJhcGkiLCJ1cGRhdGVVc2VySW5mb3JtYXRpb24iLCJ0aGVuIiwicmVzdWx0IiwianNvbiIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwibG9nIiwicGhvdG9DYXJkUG9wdXAiLCJfaW1hZ2VUaXRsZSIsIl9pbWFnZUxpbmsiLCJ1c2VyUHJvZmlsZUluZm9ybWF0aW9uIiwicHJvZmlsZU5hbWVTZWxlY3RvciIsInByb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yIiwiX3Byb2ZpbGVOYW1lIiwiX3Byb2ZpbGVEZXNjcmlwdGlvbiIsImdldFVzZXJJbmZvIiwiYWJvdXQiLCJzZXRVc2VySW5mbyIsInByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2NyaXB0aW9uIiwib3B0aW9ucyIsIl9vcHRpb25zIiwiYmFzZVVybCIsIl9iYXNlVXJsIiwiaGVhZGVycyIsIl9oZWFkZXJzIiwiZ2V0SW5pdGlhbENhcmRzIiwiZmV0Y2giLCJhdXRob3JpemF0aW9uIiwicmVzIiwib2siLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZ2V0VXNlckluZm9ybWF0aW9uIiwiYWxsIiwiZ2V0VXNlciIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidXBkYXRlQ2FyZHMiLCJmb3JtVmFsaWRhdG9ycyIsImNvbmZpZyIsImZvcm1TZWxlY3RvciIsInZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIl0sInNvdXJjZVJvb3QiOiIifQ==